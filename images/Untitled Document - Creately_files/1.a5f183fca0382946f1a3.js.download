(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/xGf":function(t,e,n){t.exports=n("4e1j")},"0N1A":function(t,e){var n,r,o,i,a,s,u,l,c,p,d,f,h,g,b,m=!1;function y(){if(!m){m=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),y=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(f=/\b(iPhone|iP[ao]d)/.exec(t),h=/\b(iP[ao]d)/.exec(t),p=/Android/i.exec(t),g=/FBAN\/\w+;/i.exec(t),b=/Mobile/i.exec(t),d=!!/Win64/.exec(t),e){(n=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN)&&document&&document.documentMode&&(n=document.documentMode);var v=/(?:Trident\/(\d+.\d+))/.exec(t);s=v?parseFloat(v[1])+4:n,r=e[2]?parseFloat(e[2]):NaN,o=e[3]?parseFloat(e[3]):NaN,(i=e[4]?parseFloat(e[4]):NaN)?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),a=e&&e[1]?parseFloat(e[1]):NaN):a=NaN}else n=r=o=a=i=NaN;if(y){if(y[1]){var O=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);u=!O||parseFloat(O[1].replace("_","."))}else u=!1;l=!!y[2],c=!!y[3]}else u=l=c=!1}}var v={ie:function(){return y()||n},ieCompatibilityMode:function(){return y()||s>n},ie64:function(){return v.ie()&&d},firefox:function(){return y()||r},opera:function(){return y()||o},webkit:function(){return y()||i},safari:function(){return v.webkit()},chrome:function(){return y()||a},windows:function(){return y()||l},osx:function(){return y()||u},linux:function(){return y()||c},iphone:function(){return y()||f},mobile:function(){return y()||f||h||p||b},nativeApp:function(){return y()||g},android:function(){return y()||p},ipad:function(){return y()||h}};t.exports=v},"0fSw":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){function t(){this.toolbars={}}return t.prototype.register=function(t){if(!t||!t.id)throw new Error("The floating toolbar instance to be registered is not valid.");this.toolbars[t.id]=t},t.prototype.unregister=function(t){delete this.toolbars[t]},t.prototype.get=function(t){return this.toolbars[t]},t}()},"0itG":function(t,e,n){"use strict";var r=n("D57K"),o=n("5xGT"),i=(n("hX56"),n("4y1S")),a=n("nsO7"),s=n("LiEJ"),u=n("gQst"),l=n("pN2L"),c=n("3riI"),p=n("AouM"),d=n("z5yO"),f=n("Jg5f"),h=n("lqvn"),g=n("D3kC"),b=n("c7W3"),m=(n("QoSw"),n("SBw3"),n("2m+3"),n("AaYA")),y=n("yhNa"),v=n("LC7v"),O=n("QCJn"),S=n("TQyE"),C=n("IGWl"),x=n("g3Dv"),w=n("fQLH"),j=n("cQOC"),I=n("NNJu"),P=n("U3QC"),T=n("12aA"),D=n("G2Mx"),k=n("myrl"),E=n("y0dT"),A=function(t){function e(e,n,r,o,i,a){var s=t.call(this,e,a)||this;return s.componentFactoryResolver=e,s.featureList=n,s.commandService=r,s.state=o,s.ll=i,s.injector=a,s.items={},s.changeSubs={},s._change=new w.a,s.change.subscribe((function(t){return s.handleFeatureChange(t)})),s.resetOperations(),s}return r.e(e,t),Object.defineProperty(e.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIds",{get:function(){return Object.keys(this.items)},enumerable:!0,configurable:!0}),e.prototype.addItem=function(t,e,n,r,o){var i=this.makeComponent(n);Object(a.isEmpty)(o)||i.instance.setProperties(o),i.instance.id=t,i.instance.setData(r),i.instance.apply(),this.operations.add.push({item:i,container:e})},e.prototype.removeItem=function(t){this.items[t]&&this.items[t].item&&this.operations.remove.push(t)},e.prototype.updateItem=function(t,e,n){if(this.items[t]&&this.items[t].item){var r=this.items[t].item;Object(a.isEmpty)(n)||r.instance.setProperties(n),r.instance.setData(e),r.instance.apply(),this.operations.update.push(t)}},e.prototype.apply=function(t){var e=this,n=this.getPendingOperations(t);return n.length>0?j.a.apply(void 0,r.k(n)).pipe(Object(P.a)({complete:function(){e.resetOperations()}})):(this.resetOperations(),Object(l.a)({}))},e.prototype.getPendingOperations=function(t){var e=this,n=[];return this.operations.remove.length>0&&(n=n.concat(this.operations.remove.map((function(n){return e.removeFeatureItem(n,t)})))),this.operations.add.length>0&&(n=n.concat(this.operations.add.map((function(n){return e.insertFeatureItem(n.item,n.container,t)})))),this.operations.update.length>0&&(n=n.concat(this.operations.update.map((function(n){return e.updateFeatureItem(n,t)})))),n},e.prototype.insertFeatureItem=function(t,e,n){if(!this.items[t.instance.id]){if(this.items[t.instance.id]={item:t,container:e},this.subscribeToItemChange(t.instance),n){var r=this.getAddItemAnimation(t);return this.insert(e,t),t.changeDetectorRef.detectChanges(),r.start()}this.insert(e,t),t.changeDetectorRef.detectChanges()}return Object(l.a)({})},e.prototype.getItem=function(t){if(this.items&&this.items[t]){var e=this.items[t].item;if(e)return e.instance}},e.prototype.removeFeatureItem=function(t,e){var n=this;if(!this.items[t])return Object(l.a)({});var r=this.items[t].item,o=this.items[t].container;if(r){if(this.unsubscribeFromItemChange(t),e)return this.getRemoveItemAnimation(r).start().pipe(Object(P.a)({complete:function(){n.remove(o,r),delete n.items[t]}}));this.remove(o,r),delete this.items[t]}return Object(l.a)({})},e.prototype.updateFeatureItem=function(t,e){if(this.items[t]&&this.items[t].item){var n=this.items[t].item;if(e)return n.instance.applyAnimated();n.instance.apply()}return Object(l.a)({})},e.prototype.resetOperations=function(){this.operations={add:[],remove:[],update:[]}},e.prototype.subscribeToItemChange=function(t){var e=this,n=t.change.subscribe((function(n){return e._change.next({id:t.id,data:n})}));this.changeSubs[t.id]=n},e.prototype.unsubscribeFromItemChange=function(t){this.changeSubs[t]&&(this.changeSubs[t].unsubscribe(),delete this.changeSubs[t])},e.prototype.getAddItemAnimation=function(t){var e=new I.c({});return e.element=t.location.nativeElement,e},e.prototype.getRemoveItemAnimation=function(t){var e=new I.c({});return e.element=t.location.nativeElement,e},e.prototype.ngOnDestroy=function(){var t=this;Object.keys(this.changeSubs).forEach((function(e){t.changeSubs[e].unsubscribe()})),this._change.complete(),this.changeSubs=null,this.items=null,this.operations=null},e.prototype.renderFeatureChanges=function(t,e){var n=this;return this.features.pipe(Object(f.a)((function(e){return e.filter((function(e){return t.includes(e.featureId)}))})),Object(p.a)((function(r){return n.manage(t,r,e).pipe(Object(T.a)(r))})),Object(p.a)((function(t){return n.apply(!0).pipe(Object(T.a)(t))})))},e.prototype.renderShapeSpecificFeatures=function(t){var e=this;return this.features.pipe(Object(p.a)((function(t){var n=e.state.get("Selected");if(n&&1===n.length){var r=n[0];return e.ll.forCurrentObserver(!0).pipe(Object(p.a)((function(t){return t.getShapeOnce(r)})),Object(f.a)((function(e){return t.filter((function(t){return t.shapeDefId===e.defId}))})))}return Object(l.a)([])})),Object(p.a)((function(n){return e.manageCustomShapeComponents(n,t).pipe(Object(T.a)(n))})),Object(p.a)((function(t){return e.apply(!0).pipe(Object(T.a)(t))})))},e.prototype.manageCustomShapeComponents=function(t,e){var n=this,r=t.map((function(t){return t.featureId}));return this.itemIds.filter((function(t){return t.includes("creately")})).filter((function(t){return!r.includes(t)})).forEach((function(t){return n.removeItem(t)})),Object(j.a)(this.updateComponents(t),this.addComponents(t,e)).pipe(Object(D.a)(1))},e.prototype.manage=function(t,e,n){return Object(j.a)(this.removeComponents(t,e),this.updateComponents(e),this.addComponents(e,n)).pipe(Object(D.a)(1))},e.prototype.removeComponents=function(t,e){var n=this;return t.filter((function(t){return-1===e.map((function(t){return t.featureId})).indexOf(t)})).forEach((function(t){return n.removeItem(t)})),Object(l.a)({})},e.prototype.addComponents=function(t,e){var n=this,o=[];return t.forEach((function(t,r){-1===n.itemIds.indexOf(t.featureId)&&o.push(n.addComponent(t,e))})),Object(a.isEmpty)(o)?Object(l.a)({}):u.a.apply(void 0,r.k(o))},e.prototype.updateComponents=function(t){var e=this,n=[];return t.forEach((function(t,r){e.itemIds.includes(t.featureId)&&n.push(e.updateComponent(t))})),Object(a.isEmpty)(n)?Object(l.a)({}):u.a.apply(void 0,r.k(n))},e.prototype.updateComponent=function(t){var e=this,n=this.featureList.getFeature(t.featureId),r=this.getUIControlProperties(n);return this.getItemData(n,t.data).pipe(Object(f.a)((function(n){return e.updateItem(t.featureId,n,r)})))},e.prototype.addComponent=function(t,e){var n=this,r=this.featureList.getFeature(t.featureId),o=this.getUIControlType(r.dataType),i=this.getUIControlProperties(r);return this.getItemData(r,t.data).pipe(Object(f.a)((function(r){return n.addItem(t.featureId,e,o,r,i)})))},e.prototype.getUIControlProperties=function(t){return{id:t.id,icon:t.icon,label:t.label,labelPosition:t.labelPosition,dropdownDirection:t.dropdownDirection,tooltip:t.tooltip}},e.prototype.getUIControlType=function(t){if(!t||t===x.d.BINARY)return C.a;if(t===x.d.TEXT_POSITION)return m.a;if(t===x.d.OPTION_LIST_COMBO)return O.a;if(t===x.d.COLOR)return S.a;if(t===x.d.NUMBER)return y.a;if(t===x.d.OPTION_LIST)return v.a;if(t===x.d.CUSTOM_SHAPE_STYLE)return k.a;if(t===x.d.NUMBER_OPTIONS)return E.a;throw new Error("UI control is not available for "+t)},e.prototype.getItemData=function(t,e){return t.transformer?this.injector.get(t.transformer).getFeatureData(t.id,e):e?Object(l.a)(o.k.mergeInstances({},t.data,e)):Object(l.a)(t.data)},e.prototype.handleFeatureChange=function(t){var e=this,n=this.featureList.getFeature(t.id);if(n.transformer){this.injector.get(n.transformer).getApplyData(n.id,t.data).subscribe((function(t){e.commandService.dispatch(n.commandEvent,t)}))}else{var r=o.k.mergeInstances({},this.getCommandData(t.id),t.data);this.commandService.dispatch(n.commandEvent,r)}},e.prototype.getCommandData=function(t){var e={},n=this.getItem(t);return n&&n.data&&(n.data.dataItemId&&(e.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(e.alterFunction=n.data.alterFunction)),e},e}(I.f);n.d(e,"a",(function(){return M}));var M=function(t){function e(e,n,r,o,i,a,u,l,c){var p=t.call(this,i,u,o,e,n,a)||this;return p.state=e,p.ll=n,p.gridService=r,p.commandService=o,p.componentFactoryResolver=i,p.injector=a,p.featureList=u,p.dataStore=l,p.translator=c,p.selectionXFeature=["selectionPositionX"],p.selectionYFeature=["selectionPositionY"],p.selectionWidthFeature=["selectionWidth"],p.selectionHeightFeature=["selectionHeight"],p.connectorStartXFeature=["connectorStartX"],p.connectorStartYFeature=["connectorStartY"],p.connectorEndXFeature=["connectorEndX"],p.connectorEndYFeature=["connectorEndY"],p.selectionAngleFeature=["selectionAngle"],p.textFeaturesBISU=["boldModelText","italicModelText","underlineModelText","strikeoutModelText"],p.textFeaturesAlign=["leftAlignModelText","centerAlignModelText","rightAlignModelText","justifyModelText"],p.textFeatureFont=["fontModelText"],p.textFeatureSize=["sizeModelText"],p.textFeatureColor=["colorModelText"],p.textFeatureTextPosition=["textPosition"],p.styleFeatureColor=["colorFill","colorLine","customShapeStyles"],p.styleFeatureLineStyle=["styleLine"],p.styleFeatureLineThickness=["lineThickness"],p.features=new s.a([]),p.hasUnlockedShapes=new s.a(!0),p.subs=[],p._panelName=p.panelName(),p._selection=p.state.changes("Selected"),p}return r.e(e,t),Object.defineProperty(e,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!0,configurable:!0}),e.prototype.ngAfterViewInit=function(){var t=this;this.subs.push(Object(u.a)(this.renderFeatureChanges(this.textFeaturesBISU,this.textSectionBISU),this.renderFeatureChanges(this.textFeaturesAlign,this.textSectionAlign),this.renderFeatureChanges(this.textFeatureSize,this.textSectionSize),this.renderFeatureChanges(this.textFeatureFont,this.textSectionFont),this.renderFeatureChanges(this.textFeatureColor,this.textSectionColor),this.renderFeatureChanges(this.textFeatureTextPosition,this.textSectionTextPosition)).subscribe((function(){return t.manageSectionVisiblity(t.textSection,[{group:t.textSectionPanelItemBISUAlign,items:[t.textSectionBISU,t.textSectionAlign]},{group:t.textSectionPanelItemFontSize,items:[t.textSectionSize,t.textSectionFont]},{group:t.textSectionPanelItemColor,items:[t.textSectionColor]},{group:t.textSectionPanelTextPosition,items:[t.textSectionTextPosition]}])})),Object(u.a)(this.renderFeatureChanges(this.styleFeatureColor,this.styleSectionColors),this.renderFeatureChanges(this.styleFeatureLineStyle,this.styleSectionLineStyle),this.renderFeatureChanges(this.styleFeatureLineThickness,this.styleSectionLineThickness)).subscribe((function(){return t.manageSectionVisiblity(t.styleSection,[{group:t.styleSectionPanelItemColors,items:[t.styleSectionColors]},{group:t.styleSectionPanelItemStyleThickness,items:[t.styleSectionLineStyle,t.styleSectionLineThickness]}])})),Object(u.a)(this.renderFeatureChanges(this.selectionXFeature,this.selectionX),this.renderFeatureChanges(this.selectionYFeature,this.selectionY),this.renderFeatureChanges(this.selectionWidthFeature,this.selectionWidth),this.renderFeatureChanges(this.selectionHeightFeature,this.selectionHeight),this.renderFeatureChanges(this.selectionAngleFeature,this.selectionAngle),this.renderFeatureChanges(this.connectorStartXFeature,this.connectorStartX),this.renderFeatureChanges(this.connectorStartYFeature,this.connectorStartY),this.renderFeatureChanges(this.connectorEndXFeature,this.connectorEndX),this.renderFeatureChanges(this.connectorEndYFeature,this.connectorEndY)).subscribe((function(){t.manageSectionVisiblity(t.sizeAndPosSection,[{group:t.sizeAndPosPanelItemXY,items:[t.selectionX,t.selectionY]},{group:t.sizeAndPosPanelItemWH,items:[t.selectionWidth,t.selectionHeight]},{group:t.sizeAndPosPanelItemA,items:[t.selectionAngle]},{group:t.sizeAndPosPanelItemConStartXY,items:[t.connectorStartX,t.connectorStartY]},{group:t.sizeAndPosPanelItemConEndXY,items:[t.connectorEndX,t.connectorEndY]}])})),this.renderShapeSpecificFeatures(this.customControlContainer).subscribe((function(e){t.manageSectionVisiblity(t.customSection,[{group:t.customSection,items:e.map((function(t){return t.featureId}))}])})),this.features.subscribe((function(e){t.setDiagramFeaturesVisibility(Object(a.isEmpty)(e))})))},e.prototype.panelName=function(){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(p.a)((function(){return t.state.changes("Selected").pipe(Object(d.a)((function(e){return!Object(a.isEmpty)(e)||(t.hasUnlockedShapes.next(!0),!1)})),Object(p.a)((function(e){return t.getDocumentChanges(e).pipe(Object(f.a)((function(n){var r,o,i,a=[],s=[],u=[],l=!1;return e.forEach((function(t){var e=n.getShape(t);e.isLocked||(l=!0),e.isConnector()?e.isLine()?s.push(e):a.push(e):u.push(e)})),l?t.hasUnlockedShapes.next(!0):(t.hasUnlockedShapes.next(!1),o=t.translator.instant("LABELS.LOCKED"),i="nu-ic-lock"),s.length>0&&0===u.length&&0===a.length?r=1===s.length?"Line":s.length+" Lines Selected":a.length>0&&0===u.length&&0===s.length?1===a.length?(r="Connector",o=a[0].name):r=a.length+" Connectors Selected":r=u.length>0&&0===a.length&&0===s.length?1===u.length?u[0].name:u.length+" Shapes Selected":a.length+u.length+s.length+" Shapes Selected",{mainText:r,subText:o,subTextIcon:i}})))})))})))},e.prototype.getDocumentChanges=function(t){var e=this.ll.forCurrent(!1);return e.getDiagramOnce().pipe(Object(p.a)((function(n){return 1!==t.length?Object(l.a)(n):Object(u.a)(Object(l.a)(n),e.getDiagramChanges().pipe(Object(f.a)((function(t){return t.model})),Object(d.a)((function(e){var n=e.shapes[t[0]];return n&&n.isConnector()}))))})))},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.manageSectionVisiblity=function(t,e){var n=t.nativeElement;n.style.display="none",e.forEach((function(t){var e=t.group.nativeElement;t.items.every((function(t){return 0===t.length}))?e.style.display="none":(e.style.display="",n.style.display="")}))},e.prototype.setDiagramFeaturesVisibility=function(t){var e=this.gridSection.nativeElement,n=this.diagramInfoSection.nativeElement;t?(e.style.display="",n.style.display=""):(e.style.display="none",n.style.display="none")},Object.defineProperty(e.prototype,"id",{get:function(){return"diagraminfo"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return"properties"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this.translator.instant("TOOLTIPS.DIAGRAM_INFO")},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){this.diagram||(this.diagram=this.getDiagramObservable())},e.prototype.getDiagramObservable=function(){var t=this;return this.ll.forCurrentObserver(!1).pipe(Object(p.a)((function(t){return t.getDiagramModel()})),Object(p.a)((function(e){var n=t.dataStore.findOne(i.o,{id:e.updatedBy}).pipe(Object(f.a)((function(t){return t&&t.firstName?t:{firstName:"Someone"}})));return Object(c.b)(Object(l.a)(e),n)})),Object(f.a)((function(e){var n=r.i(e,2),o=n[0],i=n[1],a=o.getBounds();return{description:o.description,tagsArray:o.tagsArray,width:Math.round(a.width),height:Math.round(a.height),typeName:o.typeName?o.typeName:"Block Diagram",updatedBy:i.firstName,updatedDate:t.translator.instant("LABELS.UPDATED_THIS")+" "+o.lastUpdatedMoment()}})),Object(h.a)((function(t,e){return Object(a.isEqual)(t,e)})),Object(g.a)())},e.prototype.onActive=function(){this.diagram||(this.diagram=this.getDiagramObservable()),this.diagramSub=this.diagram.connect(),o.lb.track("right.info.panel.click",{value1Type:"status",value1:"open"})},e.prototype.onInactive=function(){o.lb.track("right.info.panel.click",{value1Type:"status",value1:"close"}),this.diagramSub.unsubscribe()},e.prototype.updateDescription=function(t){o.lb.track("right.info.description.change"),this.commandService.dispatch(b.a.updateDiagramInfo,{description:t})},e.prototype.updateTags=function(t){o.lb.track("right.info.tags.update",{value1Type:"tags",value1:t}),this.commandService.dispatch(b.a.updateDiagramInfo,{tags:t})},Object.defineProperty(e.prototype,"uiState",{get:function(){return this.state.changes("InterfaceControlState")},enumerable:!0,configurable:!0}),e.prototype.showGrid=function(t){var e=t?"true":"false";o.lb.track("right.info.grid."+e),this.gridService.showGrid.value!==t&&this.gridService.showGrid.next(t)},e.prototype.snapToGrid=function(t){var e=t?"true":"false";o.lb.track("right.info.snap."+e),this.gridService.enableSnapToGrid.value!==t&&this.gridService.enableSnapToGrid.next(t)},e.prototype.showGuides=function(t){this.state.get("ShowGuides")!==t&&this.state.set("ShowGuides",t)},e.prototype.snapToGuides=function(t){this.state.get("SnapToGuides")!==t&&this.state.set("SnapToGuides",t)},e}(A)},"2m+3":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("D57K"),o=n("LiEJ"),i=n("ADlH"),a=function(){function t(){this.enableSnapToGrid=new o.a(!0),this.showGrid=new o.a(!0),this.gridSizeMajor=5*t.gridSize}return t.prototype.isOnGrid=function(e){return e%t.gridSize==0},t.prototype.isOnGridMajor=function(t){return t%this.gridSizeMajor==0},t.prototype.snapToGrid=function(e){return Object(i.roundN)(e,t.gridSize)},t.prototype.snapToGridNext=function(e){return Object(i.ceilN)(e,t.gridSize)},t.prototype.snapToGridPrevious=function(e){return Object(i.floorN)(e,t.gridSize)},t.prototype.getGridLines=function(e,n){var o,i;return r.f(this,(function(r){switch(r.label){case 0:if(e===n)throw Error("Start and end of the grid line location cant be same");o=e<n?t.gridSize:-t.gridSize,i=e,this.isOnGrid(e)||(i=o>0?this.snapToGridNext(e):this.snapToGridPrevious(e)),r.label=1;case 1:return o>0&&i<n||o<0&&i>n?[4,i]:[3,3];case 2:return r.sent(),i+=o,[3,1];case 3:return[2]}}))},t.prototype.point=function(t){return this.enableSnapToGrid.value&&(t.x=this.adjustToGrid(t.x),t.y=this.adjustToGrid(t.y)),t},t.prototype.shapeTransform=function(t,e){return e},t.prototype.connectorPoints=function(t,e){return e},t.prototype.adjustToGrid=function(e){return e.value=Math.round(e.value),this.isOnGrid(e.value)?(this.adjustToGridProperty("low",e),this.adjustToGridProperty("high",e),e):0===e.low?(e.value=this.snapToGridNext(e.value),this.adjustToGridProperty("high",e)):0===e.high?(e.value=this.snapToGridPrevious(e.value),this.adjustToGridProperty("low",e)):(e.low<=t.gridSize&&e.high<=t.gridSize?e.value=this.snapToGrid(e.value):e.low>t.gridSize&&e.high>t.gridSize?e.low<e.high?e.value=this.snapToGridPrevious(e.value-e.low):e.value=this.snapToGridNext(e.value+e.high):e.low>t.gridSize?e.value=this.snapToGridNext(e.value):e.high>t.gridSize&&(e.value=this.snapToGridPrevious(e.value)),this.adjustToGridProperty("low",e),this.adjustToGridProperty("high",e),e)},t.prototype.adjustToGridProperty=function(e,n){return 0===n[e]?n:(n[e]<=t.gridSize?n[e]=t.gridSize:n[e]=this.snapToGridNext(n[e]),n)},t.gridSize=10,t}()},"3+4Q":function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("D57K"),o=n("5xGT"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.prototype.isResolved=function(){return!!this.resolved},e.prototype.isDeleted=function(){return!!this.deleted},e.prototype.isEdited=function(){return!!this.edited},e.prototype.isNew=function(t){return!(this.isResolved()||this.userId===t||this.seenBy&&this.seenBy.includes(t))},e.prototype.getTime=function(){return""+o.v.formatDistance(this.added,(new Date).getTime())},e}(o.f)},"4e1j":function(t,e,n){"use strict";var r=n("0N1A"),o=n("4kdB"),i=10,a=40,s=800;function u(t){var e=0,n=0,r=0,o=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),r=e*i,o=n*i,"deltaY"in t&&(o=t.deltaY),"deltaX"in t&&(r=t.deltaX),(r||o)&&t.deltaMode&&(1==t.deltaMode?(r*=a,o*=a):(r*=s,o*=s)),r&&!e&&(e=r<1?-1:1),o&&!n&&(n=o<1?-1:1),{spinX:e,spinY:n,pixelX:r,pixelY:o}}u.getEventType=function(){return r.firefox()?"DOMMouseScroll":o("wheel")?"wheel":"mousewheel"},t.exports=u},"4ifF":function(t,e,n){"use strict";var r=n("LoAr"),o=n("WT9V"),i=n("igS9");n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return p}));var a=[[".dropdown-container[_ngcontent-%COMP%]{display:flex;-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;align-items:center;cursor:pointer;background-color:#fff;border-radius:4px;border:1px solid #d3d3e7;margin-top:5px;display:flex;align-items:center}.dropdown-container[_ngcontent-%COMP%]:hover{border:1px solid #80c6b9}.dropdown-selected[_ngcontent-%COMP%]{padding:6px;display:flex;align-items:center;width:100%}.dropdown-value[_ngcontent-%COMP%]{flex:1}.dropdown-selected-icon[_ngcontent-%COMP%]{background:url(/diagram/arrow-down-extra-small-thin.0f4b5b03a32b643de776.svg) center right no-repeat;width:30px;height:20px;float:right}.dropdown-selected[_ngcontent-%COMP%]:hover   .dropdown-selected-icon[_ngcontent-%COMP%]{background:url(/diagram/arrow-down-extra-small-thin-orange.c3ddee4c7763a388c906.svg) center right no-repeat}.dropdown-list[_ngcontent-%COMP%]{position:absolute;border:1px solid #d3d3e7;border-radius:4px;background-color:#fff;padding-right:10px;padding-left:10px;right:0;min-width:130px;z-index:1;overflow:hidden;box-shadow:0 2px 2px #c3c3de;opacity:0;transform:translateY(-5px)}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;margin-bottom:15px;margin-top:15px}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex:1}.dropdown-list.up[_ngcontent-%COMP%]{bottom:30px}.dropdown-list.down[_ngcontent-%COMP%]{top:30px}.dropdown-selected-tick[_ngcontent-%COMP%]{width:20px;height:30px;margin-right:10px}.dropdown-selected-tick[_ngcontent-%COMP%]   .nu-icon[_ngcontent-%COMP%]{color:#04263d}.dropdown-container.large[_ngcontent-%COMP%]   .dropdown-selected[_ngcontent-%COMP%]{font-size:16px}"]],s=r.Fb({encapsulation:0,styles:a,data:{}});function u(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,":svg:svg",[["class","nu-icon"]],null,null,null,null,null)),(t()(),r.Hb(1,0,null,null,0,":svg:use",[[":xlink:href","./assets/icons/symbol-defs.svg#nu-ic-tick-thin"]],null,null,null,null,null))],null,null)}function l(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,5,"li",[["class","fx-center-vertical"]],null,null,null,null,null)),(t()(),r.Hb(1,0,null,null,2,"div",[["class","dropdown-selected-tick"]],null,null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,u)),r.Gb(3,16384,null,0,o.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.Hb(4,0,null,null,1,"a",[],null,[[null,"click"]],(function(t,e,n){var r=!0,o=t.component;"click"===e&&(r=!1!==o.selectItem(t.context.$implicit)&&r);return r}),null,null)),(t()(),r.bc(5,null,["",""]))],(function(t,e){t(e,3,0,e.context.$implicit.select)}),(function(t,e){t(e,5,0,e.context.$implicit.label)}))}function c(t){return r.dc(0,[(t()(),r.Hb(0,0,[[1,0],["dropDownMenu",1]],null,2,"ul",[],[[8,"className",0]],null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,l)),r.Gb(2,278528,null,0,o.j,[r.db,r.Y,r.z],{ngForOf:[0,"ngForOf"]},null)],(function(t,e){t(e,2,0,e.component.menuItems)}),(function(t,e){var n=e.component;t(e,0,0,r.Lb(1,"dropdown-list ",n.direction,""))}))}function p(t){return r.dc(2,[r.Zb(671088640,1,{dropDownMenu:0}),(t()(),r.Hb(1,0,null,null,7,"div",[],[[8,"className",0]],[[null,"click"]],(function(t,e,n){var r=!0,o=t.component;"click"===e&&(r=!1!==o.toggleMenu()&&r);return r}),null,null)),(t()(),r.Hb(2,0,null,null,3,"div",[["class","dropdown-selected"]],null,null,null,null,null)),(t()(),r.Hb(3,0,null,null,1,"span",[["class","dropdown-value"]],null,null,null,null,null)),(t()(),r.bc(4,null,["",""])),(t()(),r.Hb(5,0,null,null,0,"span",[["class","dropdown-selected-icon"]],null,null,null,null,null)),(t()(),r.wb(16777216,null,null,2,null,c)),r.Gb(7,16384,null,0,o.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),r.Vb(131072,o.b,[r.i])],(function(t,e){var n=e.component;t(e,7,0,r.cc(e,7,0,r.Tb(e,8).transform(n.onShow)))}),(function(t,e){var n=e.component;t(e,1,0,r.Lb(2,"dropdown-container ",n.theme," ",n.dropdownSize,"")),t(e,4,0,n.selectedItem.label)}))}r.Db("drop-down",i.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"drop-down",[],null,null,null,p,s)),r.Gb(1,704512,null,0,i.a,[r.o],null,null)],null,null)}),{direction:"direction",dropdownSize:"dropdownSize",theme:"theme",menuItems:"menuItems",onSelectTrackingId:"onSelectTrackingId"},{},[])},"4kdB":function(t,e,n){"use strict";var r,o=n("c3EF");o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=function(t,e){if(!o.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&r&&"wheel"===t&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}},"6EBr":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.primarySelectionColor="#F39C12",e.primarySelectionLineColor="#FEB986",e.selectionHandleRadius=6,e.selectionHandleLineThickness=1,e.primarySelectionHandleColor="#BABABA",e.secondarySelectionHandleColor="#30BA9B",e.selectionBoundDashStyle=[2,2],e}(n("19Zn").b)},"6qzS":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("D57K"),o=n("am9W"),i=n("nsO7"),a=function(){function t(){this.allLibraries=r.k([{id:"arrows",label:"Arrows",groups:["General"]},{id:"archimate-application",label:"Archimate Application",groups:["Archimate"]},{id:"archimate-business",label:"Archimate Business",groups:["Archimate"]},{id:"archimate-composite",label:"Archimate Composite",groups:["Archimate"]},{id:"archimate-implementation",label:"Archimate Implementation",groups:["Archimate"]},{id:"archimate-motivation",label:"Archimate Motivation",groups:["Archimate"]},{id:"archimate-physical",label:"Archimate Physical",groups:["Archimate"]},{id:"archimate-strategy",label:"Archimate Strategy",groups:["Archimate"]},{id:"archimate-technology",label:"Archimate Technology",groups:["Archimate"]},{id:"aws-analytics",label:"AWS Analytics",groups:["AWS"]},{id:"aws-app-integration",label:"AWS App Integration",groups:["AWS"]},{id:"aws-ar-vr",label:"AWS AR & VR",groups:["AWS"]},{id:"aws-blockchain",label:"AWS Blockchain",groups:["AWS"]},{id:"aws-business-applications",label:"AWS Business Applications",groups:["AWS"]},{id:"aws-cdn",label:"AWS CDN",groups:["AWS"]},{id:"aws-compute",label:"AWS Compute",groups:["AWS"]},{id:"aws-cost-management",label:"AWS Cost Management",groups:["AWS"]},{id:"aws-customer-engagement",label:"AWS Customer Engagement",groups:["AWS"]},{id:"aws-database",label:"AWS Database",groups:["AWS"]},{id:"aws-general",label:"AWS General",groups:["AWS"]},{id:"aws-governance",label:"AWS Governance",groups:["AWS"]},{id:"aws-group-icons",label:"AWS Group Icons",groups:["AWS"]},{id:"aws-iot",label:"AWS IOT",groups:["AWS"]},{id:"aws-media",label:"AWS Media",groups:["AWS"]},{id:"aws-ml",label:"AWS ML",groups:["AWS"]},{id:"aws-mobile",label:"AWS Mobile",groups:["AWS"]},{id:"aws-other",label:"AWS Other",groups:["AWS"]},{id:"aws-security",label:"AWS Security",groups:["AWS"]},{id:"aws-storage",label:"AWS Storage",groups:["AWS"]},{id:"block",label:"Block Shapes",groups:["General"]},{id:"bpmn",label:"BPMN Shapes",groups:["Business"]},{id:"chemistry-lab-equipment",label:"Chemistry Lab",groups:["Other"]},{id:"concept-map",label:"Concept Maps",groups:["Brainstorming","Business"]},{id:"database",label:"Database Diagram",groups:["Software"]},{id:"dfd-gs",label:"Data Flow Diagrams - GS",groups:["Software"]},{id:"dfd-yc",label:"Data Flow Diagrams - YC",groups:["Software"]},{id:"entity-relationship-cf",label:"Entity Relationship - Crows Foot",groups:["Software"]},{id:"entity-relationship-chens",label:"Entity Relationship - Chens",groups:["Software"]},{id:"flowchart",label:"Flowchart",groups:["Business","Software","Brainstorming"]},{id:"gantt",label:"Gantt Chart",groups:["Business"]},{id:"general",label:"Basic Shapes",groups:["General"]},{id:"venn",label:"Venn Diagram",groups:["Business","Brainstorming"]},{id:"timeline",label:"Timeline Diagram",groups:["Business","Brainstorming"]},{id:"grids-canvases",label:"Grids and Canvases",groups:["General"]},{id:"icons-education",label:"Icons - Education",groups:["Icons"]},{id:"icons-people-outlines",label:"Icons - People Outlines",groups:["Icons"]},{id:"icons-people",label:"Icons - People",groups:["Icons"]},{id:"infographics",label:"Infographics",groups:["Business"]},{id:"vsm",label:"Value Stream Map",groups:["Business"]},{id:"material-icons",label:"Icons - Material Design",groups:["Icons"]},{id:"mindmap",label:"Mindmaps",groups:["Brainstorming"]},{id:"network-rack",label:"Network Rack Shapes",groups:["IT & Networking"]},{id:"org-chart",label:"Organizational Charts",groups:["Business"]},{id:"simple-network",label:"Network Shapes",groups:["IT & Networking"]},{id:"site-map",label:"Site Maps and UX Flows",groups:["Software"]},{id:"stars-and-balloons",label:"Stars and Balloons",groups:["General"]},{id:"swot",label:"SWOT Diagrams",groups:["Brainstorming","Business"]},{id:"tqm",label:"Total Quality Management (TQM)",groups:["Business"]},{id:"ui-mockup",label:"UI Mockup",groups:["Software"]},{id:"uml-activity",label:"UML Activity",groups:["Software"]},{id:"uml-class",label:"UML Class",groups:["Software"]},{id:"uml-communication",label:"UML Communication",groups:["Software"]},{id:"uml-sequence",label:"UML Sequence",groups:["Software"]},{id:"uml-state-machine",label:"UML State Machine",groups:["Software"]},{id:"use-case",label:"UML Use Case",groups:["Software"]},{id:"cisco-products",label:"Cisco Products",groups:["Cisco"]},{id:"cisco-miscellaneous",label:"Cisco Miscellaneous",groups:["Cisco"]},{id:"gcp-ai-and-machine-learning",label:"Google Cloud AI & Machine Learning",groups:["Google Cloud"]},{id:"gcp-api-management",label:"Google Cloud API Management",groups:["Google Cloud"]},{id:"gcp-compute",label:"Google Cloud Compute",groups:["Google Cloud"]},{id:"gcp-data-analytics",label:"Google Cloud Data Analytics",groups:["Google Cloud"]},{id:"gcp-databases",label:"Google Cloud Databases",groups:["Google Cloud"]},{id:"gcp-developer-tools",label:"Google Cloud Developer Tools",groups:["Google Cloud"]},{id:"gcp-hybrid-and-multi-cloud",label:"Google Cloud Hybrid & Multi Cloud",groups:["Google Cloud"]},{id:"gcp-internet-of-things",label:"Google Cloud IoT",groups:["Google Cloud"]},{id:"gcp-management-tools",label:"Google Cloud Management Tools",groups:["Google Cloud"]},{id:"gcp-migration",label:"Google Cloud Migration",groups:["Google Cloud"]},{id:"gcp-networking",label:"Google Cloud Networking",groups:["Google Cloud"]},{id:"gcp-security",label:"Google Cloud Security",groups:["Google Cloud"]},{id:"gcp-storage",label:"Google Cloud Storage",groups:["Google Cloud"]},{id:"azure-ai-and-ml",label:"Azure AI and ML",groups:["Microsoft Azure"]},{id:"azure-deprecated",label:"Azure Deprecated",groups:["Microsoft Azure"]},{id:"azure-other",label:"Azure Other",groups:["Microsoft Azure"]},{id:"azure-analytics",label:"Azure Analytics",groups:["Microsoft Azure"]},{id:"azure-dev-ops",label:"Azure DevOps",groups:["Microsoft Azure"]},{id:"azure-management-governance",label:"Azure Management and Governance",groups:["Microsoft Azure"]},{id:"azure-security",label:"Azure Security",groups:["Microsoft Azure"]},{id:"azure-companies",label:"Azure Companies",groups:["Microsoft Azure"]},{id:"azure-general",label:"Azure General",groups:["Microsoft Azure"]},{id:"azure-migrate",label:"Azure Migrate",groups:["Microsoft Azure"]},{id:"azure-storage",label:"Azure Storage",groups:["Microsoft Azure"]},{id:"azure-compute",label:"Azure Compute",groups:["Microsoft Azure"]},{id:"azure-identity",label:"Azure Identity",groups:["Microsoft Azure"]},{id:"azure-mixed-reality",label:"Azure Mixed Reality",groups:["Microsoft Azure"]},{id:"azure-web",label:"Azure Web",groups:["Microsoft Azure"]},{id:"azure-container",label:"Azure Container",groups:["Microsoft Azure"]},{id:"azure-integration",label:"Azure Integration",groups:["Microsoft Azure"]},{id:"azure-mobile",label:"Azure Mobile",groups:["Microsoft Azure"]},{id:"azure-databases",label:"Azure Databases",groups:["Microsoft Azure"]},{id:"azure-intune",label:"Azure InTune",groups:["Microsoft Azure"]},{id:"azure-networking",label:"Azure Networking",groups:["Microsoft Azure"]},{id:"kubernetes-cluster-config",label:"Kubernetes Cluster Config",groups:["Kubernetes"]},{id:"kubernetes-compute",label:"Kubernetes Compute",groups:["Kubernetes"]},{id:"kubernetes-control-plane-comp",label:"Kubernetes Control Plane Components",groups:["Kubernetes"]},{id:"kubernetes-group-link",label:"Kubernetes Groups and Links",groups:["Kubernetes"]},{id:"kubernetes-infrastructure",label:"Kubernetes Infrastructure",groups:["Kubernetes"]},{id:"kubernetes-network",label:"Kubernetes Network",groups:["Kubernetes"]},{id:"kubernetes-others",label:"Kubernetes Others",groups:["Kubernetes"]},{id:"kubernetes-pods-config",label:"Kubernetes Pods Configuration",groups:["Kubernetes"]},{id:"kubernetes-rbac-model",label:"Kubernetes RBAC Model",groups:["Kubernetes"]},{id:"kubernetes-storage",label:"Kubernetes Storage",groups:["Kubernetes"]}],"stage"!==o.a.NAME&&"dev"!==o.a.NAME?[]:[{id:"experiments",label:"Experiments",groups:["Experiments"]}]),this.premiumGroups=["AWS","Business","Software","Google Cloud","Microsoft Azure","Kubernetes","IT & Networking"]}return t.prototype.getPremiumGroups=function(){return this.premiumGroups},t.prototype.belongsToPremiumGroup=function(t){var e=this;return 0!==this.allLibraries.find((function(e){return e.id===t})).groups.filter((function(t){return e.premiumGroups.includes(t)})).length},t.prototype.getAllGroups=function(){var t=[];return this.allLibraries.map((function(e){e.groups.map((function(e){t.push(e)}))})),Object(i.uniq)(t)},t.prototype.getLibrariesInGroup=function(t){return this.allLibraries.filter((function(e){return e.groups.includes(t)}))},t}()},"7pFi":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return u}));var r=n("LoAr"),o=n("YEP7"),i=n("WT9V"),a=(r.Eb(o.d,[],(function(t){return r.Qb([r.Rb(512,r.l,r.ob,[[8,[]],[3,r.l],r.F]),r.Rb(4608,i.m,i.l,[r.B,[2,i.B]]),r.Rb(1073742336,i.c,i.c,[]),r.Rb(1073742336,o.d,o.d,[])])})),r.Fb({encapsulation:2,styles:["\n\nperfect-scrollbar {\n  position: relative;\n\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  max-width: 100%;\n  max-height: 100%;\n}\n\nperfect-scrollbar[hidden] {\n  display: none;\n}\n\nperfect-scrollbar[fxflex] {\n  display: flex;\n  flex-direction: column;\n  height: auto;\n  min-width: 0;\n  min-height: 0;\n\n  -webkit-box-direction: column;\n  -webkit-box-orient: column;\n}\n\nperfect-scrollbar[fxflex] > .ps {\n  -ms-flex: 1 1 auto;\n\n  flex: 1 1 auto;\n  width: auto;\n  height: auto;\n  min-width: 0;\n  min-height: 0;\n\n  -webkit-box-flex: 1;\n}\n\nperfect-scrollbar[fxlayout] > .ps,\nperfect-scrollbar[fxlayout] > .ps > .ps-content {\n  display: flex;\n\n  -ms-flex: 1 1 auto;\n\n  flex: 1 1 auto;\n  flex-direction: inherit;\n  align-items: inherit;\n  align-content: inherit;\n  justify-content: inherit;\n  width: 100%;\n  height: 100%;\n\n  -webkit-box-align: inherit;\n  -webkit-box-direction: inherit;\n  -webkit-box-flex: 1;\n  -webkit-box-orient: inherit;\n  -webkit-box-pack: inherit;\n}\n\nperfect-scrollbar[fxlayout='row'] > .ps,\nperfect-scrollbar[fxlayout='row'] > .ps > .ps-content, {\n  flex-direction: row !important;\n\n  -webkit-box-direction: row !important;\n  -webkit-box-orient: row !important;\n}\n\nperfect-scrollbar[fxlayout='column'] > .ps,\nperfect-scrollbar[fxlayout='column'] > .ps > .ps-content {\n  flex-direction: column !important;\n\n  -webkit-box-direction: column !important;\n  -webkit-box-orient: column !important;\n}\n\nperfect-scrollbar > .ps {\n  position: static;\n\n  display: block;\n  width: inherit;\n  height: inherit;\n  max-width: inherit;\n  max-height: inherit;\n}\n\nperfect-scrollbar > .ps > .ps-overlay {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n\n  display: block;\n  overflow: hidden;\n\n  pointer-events: none;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  position: absolute;\n\n  opacity: 0;\n\n  transition: opacity 300ms ease-in-out;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  left: 0;\n\n  min-width: 100%;\n  min-height: 24px;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left,\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right {\n  top: 0;\n\n  min-width: 24px;\n  min-height: 100%;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-top {\n  top: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-left {\n  left: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-right {\n  right: 0;\n}\n\nperfect-scrollbar > .ps > .ps-overlay .ps-indicator-bottom {\n  bottom: 0;\n}\n\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y {\n  top: 0 !important;\n  right: 0 !important;\n  left: auto !important;\n\n  width: 10px;\n\n  cursor: default;\n\n  transition:\n    width 200ms linear,\n    opacity 200ms linear,\n    background-color 200ms linear;\n}\n\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y:hover,\nperfect-scrollbar > .ps.ps--active-y > .ps__rail-y.ps--clicking {\n  width: 15px;\n}\n\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x {\n  top: auto !important;\n  bottom: 0 !important;\n  left: 0 !important;\n\n  height: 10px;\n\n  cursor: default;\n\n  transition:\n    height 200ms linear,\n    opacity 200ms linear,\n    background-color 200ms linear;\n}\n\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x:hover,\nperfect-scrollbar > .ps.ps--active-x > .ps__rail-x.ps--clicking {\n  height: 15px;\n}\n\nperfect-scrollbar > .ps.ps--active-x.ps--active-y > .ps__rail-y {\n  margin: 0 0 10px;\n}\n\nperfect-scrollbar > .ps.ps--active-x.ps--active-y > .ps__rail-x {\n  margin: 0 10px 0 0;\n}\n\nperfect-scrollbar > .ps.ps--scrolling-y > .ps__rail-y,\nperfect-scrollbar > .ps.ps--scrolling-x > .ps__rail-x {\n  opacity: 0.9;\n\n  background-color: #eee;\n}\n\nperfect-scrollbar.ps-show-always > .ps.ps--active-y > .ps__rail-y,\nperfect-scrollbar.ps-show-always > .ps.ps--active-x > .ps__rail-x {\n  opacity: 0.6;\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-y > .ps-overlay:not(.ps-at-top) .ps-indicator-top {\n  opacity: 1;\n\n  background: linear-gradient(to bottom, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-y > .ps-overlay:not(.ps-at-bottom) .ps-indicator-bottom {\n  opacity: 1;\n\n  background: linear-gradient(to top, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-x > .ps-overlay:not(.ps-at-left) .ps-indicator-left {\n  opacity: 1;\n\n  background: linear-gradient(to right, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active > .ps.ps--active-x > .ps-overlay:not(.ps-at-right) .ps-indicator-right {\n  opacity: 1;\n\n  background: linear-gradient(to left, rgba(255, 255, 255, 0.5) 0%, rgba(255, 255, 255, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-top .ps-indicator-top {\n  background: linear-gradient(to bottom, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-bottom .ps-indicator-bottom {\n  background: linear-gradient(to top, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-left .ps-indicator-left {\n  background: linear-gradient(to right, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-right .ps-indicator-right {\n  background: linear-gradient(to left, rgba(170, 170, 170, 0.5) 0%, rgba(170, 170, 170, 0) 100%);\n}\n\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-top .ps-indicator-top.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-y > .ps-overlay.ps-at-bottom .ps-indicator-bottom.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-left .ps-indicator-left.ps-indicator-show,\nperfect-scrollbar.ps-show-active.ps-show-limits > .ps.ps--active-x > .ps-overlay.ps-at-right .ps-indicator-right.ps-indicator-show {\n  opacity: 1;\n}\n","\n.ps {\n  overflow: hidden !important;\n  overflow-anchor: none;\n  -ms-overflow-style: none;\n  touch-action: auto;\n  -ms-touch-action: auto;\n}\n\n\n.ps__rail-x {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  height: 15px;\n  \n  bottom: 0px;\n  \n  position: absolute;\n}\n\n.ps__rail-y {\n  display: none;\n  opacity: 0;\n  transition: background-color .2s linear, opacity .2s linear;\n  -webkit-transition: background-color .2s linear, opacity .2s linear;\n  width: 15px;\n  \n  right: 0;\n  \n  position: absolute;\n}\n\n.ps--active-x > .ps__rail-x,\n.ps--active-y > .ps__rail-y {\n  display: block;\n  background-color: transparent;\n}\n\n.ps:hover > .ps__rail-x,\n.ps:hover > .ps__rail-y,\n.ps--focus > .ps__rail-x,\n.ps--focus > .ps__rail-y,\n.ps--scrolling-x > .ps__rail-x,\n.ps--scrolling-y > .ps__rail-y {\n  opacity: 0.6;\n}\n\n.ps .ps__rail-x:hover,\n.ps .ps__rail-y:hover,\n.ps .ps__rail-x:focus,\n.ps .ps__rail-y:focus,\n.ps .ps__rail-x.ps--clicking,\n.ps .ps__rail-y.ps--clicking {\n  background-color: #eee;\n  opacity: 0.9;\n}\n\n\n.ps__thumb-x {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, height .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, height .2s ease-in-out;\n  height: 6px;\n  \n  bottom: 2px;\n  \n  position: absolute;\n}\n\n.ps__thumb-y {\n  background-color: #aaa;\n  border-radius: 6px;\n  transition: background-color .2s linear, width .2s ease-in-out;\n  -webkit-transition: background-color .2s linear, width .2s ease-in-out;\n  width: 6px;\n  \n  right: 2px;\n  \n  position: absolute;\n}\n\n.ps__rail-x:hover > .ps__thumb-x,\n.ps__rail-x:focus > .ps__thumb-x,\n.ps__rail-x.ps--clicking .ps__thumb-x {\n  background-color: #999;\n  height: 11px;\n}\n\n.ps__rail-y:hover > .ps__thumb-y,\n.ps__rail-y:focus > .ps__thumb-y,\n.ps__rail-y.ps--clicking .ps__thumb-y {\n  background-color: #999;\n  width: 11px;\n}\n\n\n@supports (-ms-overflow-style: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n\n@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {\n  .ps {\n    overflow: auto !important;\n  }\n}\n"],data:{}}));function s(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,4,"div",[["class","ps-overlay"]],[[2,"ps-at-top",null],[2,"ps-at-left",null],[2,"ps-at-right",null],[2,"ps-at-bottom",null]],null,null,null,null)),(t()(),r.Hb(1,0,null,null,0,"div",[["class","ps-indicator-top"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),r.Hb(2,0,null,null,0,"div",[["class","ps-indicator-left"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),r.Hb(3,0,null,null,0,"div",[["class","ps-indicator-right"]],[[2,"ps-indicator-show",null]],null,null,null,null)),(t()(),r.Hb(4,0,null,null,0,"div",[["class","ps-indicator-bottom"]],[[2,"ps-indicator-show",null]],null,null,null,null))],null,(function(t,e){var n=e.component;t(e,0,0,n.states.top,n.states.left,n.states.right,n.states.bottom),t(e,1,0,n.indicatorY&&n.interaction),t(e,2,0,n.indicatorX&&n.interaction),t(e,3,0,n.indicatorX&&n.interaction),t(e,4,0,n.indicatorY&&n.interaction)}))}function u(t){return r.dc(0,[r.Zb(402653184,1,{directiveRef:0}),(t()(),r.Hb(1,0,null,null,5,"div",[["style","position: static;"]],[[2,"ps",null]],null,null,null,null)),r.Gb(2,999424,[[1,4]],0,o.c,[r.H,r.A,r.o,r.K,[2,o.a]],{disabled:[0,"disabled"],config:[1,"config"]},null),(t()(),r.Hb(3,0,null,null,1,"div",[["class","ps-content"]],null,null,null,null,null)),r.Sb(null,0),(t()(),r.wb(16777216,null,null,1,null,s)),r.Gb(6,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,n.disabled,n.config),t(e,6,0,n.scrollIndicators)}),(function(t,e){t(e,1,0,e.component.usePSClass)}))}r.Db("perfect-scrollbar",o.b,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"perfect-scrollbar",[],[[2,"ps-show-limits",null],[2,"ps-show-active",null]],null,null,u,a)),r.Gb(1,507904,null,0,o.b,[r.H,r.i,r.K],null,null)],(function(t,e){t(e,1,0)}),(function(t,e){t(e,0,0,r.Tb(e,1).autoPropagation,r.Tb(e,1).scrollIndicators)}))}),{disabled:"disabled",usePSClass:"usePSClass",autoPropagation:"autoPropagation",scrollIndicators:"scrollIndicators",config:"config"},{psScrollY:"psScrollY",psScrollX:"psScrollX",psScrollUp:"psScrollUp",psScrollDown:"psScrollDown",psScrollLeft:"psScrollLeft",psScrollRight:"psScrollRight",psYReachEnd:"psYReachEnd",psYReachStart:"psYReachStart",psXReachEnd:"psXReachEnd",psXReachStart:"psXReachStart"},["*"])},AaYA:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("19Zn"),o=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),s=function(){function t(){this._change=new o.a,this.selectedElement=new i.a("none")}return Object.defineProperty(t.prototype,"containerElement",{get:function(){return this.container?this.container.nativeElement:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this.selectedElement.next(r.B.getTextPositionString(t)),this._data=t,t.transform&&this.setRotation(t.transform)},t.prototype.setRotation=function(t){var e=t.angle;this.containerElement&&(t.scaleX>0&&t.scaleY<0&&0===e&&(e=180),e>=0&&e<45?this.containerElement.style.transform="rotate(0)":e>=45&&e<90?this.containerElement.style.transform="rotate(90deg)":e>=90&&e<135?this.containerElement.style.transform="rotate(90deg)":e>=135&&e<=180?this.containerElement.style.transform="rotate(180deg)":e<=0&&e>-45?this.containerElement.style.transform="rotate(0)":e<=-45&&e>-90?this.containerElement.style.transform="rotate(-90deg)":e<=-90&&e>-135?this.containerElement.style.transform="rotate(-90deg)":e<=-135&&e>=-180&&(this.containerElement.style.transform="rotate(-180deg)"))},t.prototype.setProperties=function(t){},t.prototype.apply=function(){},t.prototype.applyAnimated=function(){return Object(a.b)()},t.prototype.handleClick=function(t){this._change.next(this.getDataPositionData(t))},t.prototype.getDataPositionData=function(t){return"ex-top-left"===t?{xType:"fixed-start",x:0,yType:"fixed-start",y:-1,alignX:-1,alignY:1,wordWrap:!1}:"ex-top-center"===t?{xType:"relative",x:.5,yType:"fixed-start",y:-1,alignX:0,alignY:1,wordWrap:!1}:"ex-top-right"===t?{xType:"fixed-end",x:0,yType:"fixed-start",y:-1,alignX:1,alignY:1,wordWrap:!1}:"in-top-left"===t?{xType:"fixed-start",x:1,yType:"fixed-start",y:1,alignX:-1,alignY:-1,wordWrap:!0}:"in-top-center"===t?{xType:"relative",x:.5,yType:"fixed-start",y:1,alignX:0,alignY:-1,wordWrap:!0}:"in-top-right"===t?{xType:"fixed-end",x:1,yType:"fixed-start",y:1,alignX:1,alignY:-1,wordWrap:!0}:"in-center-left"===t?{xType:"fixed-start",x:1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!0}:"in-center-center"===t?{xType:"relative",x:.5,yType:"relative",y:.5,alignX:0,alignY:0,wordWrap:!0}:"in-center-right"===t?{xType:"fixed-end",x:1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!0}:"in-bottom-left"===t?{xType:"fixed-start",x:1,yType:"fixed-end",y:1,alignX:-1,alignY:1,wordWrap:!0}:"in-bottom-center"===t?{xType:"relative",x:.5,yType:"fixed-end",y:1,alignX:0,alignY:1,wordWrap:!0}:"in-bottom-right"===t?{xType:"fixed-end",x:1,yType:"fixed-end",y:1,alignX:1,alignY:1,wordWrap:!0}:"ex-bottom-left"===t?{xType:"fixed-start",x:0,yType:"fixed-end",y:-1,alignX:-1,alignY:-1,wordWrap:!1}:"ex-bottom-center"===t?{xType:"relative",x:.5,yType:"fixed-end",y:-1,alignX:0,alignY:-1,wordWrap:!1}:"ex-bottom-right"===t?{xType:"fixed-end",x:0,yType:"fixed-end",y:-1,alignX:1,alignY:-1,wordWrap:!1}:"ex-left-top"===t?{xType:"fixed-start",x:-1,yType:"fixed-start",y:0,alignX:1,alignY:-1,wordWrap:!1}:"ex-right-top"===t?{xType:"fixed-end",x:-1,yType:"fixed-start",y:0,alignX:-1,alignY:-1,wordWrap:!1}:"ex-left-center"===t?{xType:"fixed-start",x:-1,yType:"relative",y:.5,alignX:1,alignY:0,wordWrap:!1}:"ex-right-center"===t?{xType:"fixed-end",x:-1,yType:"relative",y:.5,alignX:-1,alignY:0,wordWrap:!1}:"ex-left-bottom"===t?{xType:"fixed-start",x:-1,yType:"fixed-end",y:0,alignX:1,alignY:1,wordWrap:!1}:"ex-right-bottom"===t?{xType:"fixed-end",x:-1,yType:"fixed-end",y:0,alignX:-1,alignY:1,wordWrap:!1}:void 0},t}()},HVIE:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n("LoAr"),o=n("YztW"),i=n("pVzg"),a=r.Fb({encapsulation:2,styles:[],data:{}});function s(t){return r.dc(2,[(t()(),r.Hb(0,0,null,null,1,"div",[["class","simple-dd-item-container"]],null,null,null,null,null)),r.Sb(null,0)],null,null)}r.Db("simple-dropdown-item",i.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,2,"simple-dropdown-item",[],null,null,null,s,a)),r.Yb(6144,null,o.a,null,[i.a]),r.Gb(2,180224,null,0,i.a,[r.o],null,null)],null,null)}),{item:"item"},{changed:"changed"},["*"])},IGWl:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("fQLH"),o=n("LiEJ"),i=n("d9YI"),a=function(){function t(){this._change=new r.a,this.iconSource=new o.a(""),this.activeClass=new o.a(!1)}return Object.defineProperty(t.prototype,"tooltipValue",{get:function(){return this._props?this._props.tooltip:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this._props.icon&&this.iconSource.next("./assets/icons/symbol-defs.svg#"+this._props.icon),this._data&&(this._data.value?this.activeClass.next(!0):this.activeClass.next(!1))},t.prototype.applyAnimated=function(){return this.apply(),Object(i.b)()},t}()},K84q:function(t,e,n){"use strict";var r=n("LoAr"),o=n("WT9V"),i=n("uIWG");n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return c}));var a=[[".editable-label-container[_ngcontent-%COMP%]{width:100%;height:20px}.editable-label-container.editable[_ngcontent-%COMP%]{text-overflow:clip}.editable-label[_ngcontent-%COMP%]{overflow:hidden;outline:0;cursor:text;padding-bottom:3px;border-bottom:1px solid transparent;transition:border-bottom .3s linear;padding-left:1px}.editable-label[_ngcontent-%COMP%]  br{display:none}.editable-label[_ngcontent-%COMP%]:focus, .editable-label[_ngcontent-%COMP%]:hover{border-bottom:1px solid #d3d3e7;background-color:#e8e8e8}.editable-label.readonly[_ngcontent-%COMP%]{border:none;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}"]],s=r.Fb({encapsulation:0,styles:a,data:{}});function u(t){return r.dc(0,[(t()(),r.Hb(0,0,[[1,0],["editableInput",1]],null,1,"div",[["class","editable-label"],["contenteditable","true"],["spellcheck","false"]],null,[[null,"keydown.enter"],[null,"blur"],[null,"focus"],[null,"paste"]],(function(t,e,n){var r=!0,o=t.component;"keydown.enter"===e&&(r=!1!==o.emitChangeOnEnter(n)&&r);"blur"===e&&(r=!1!==o.emitChange(o.text)&&r);"focus"===e&&(o.editable=!0,r=!1!==(o.currentVal=o.text)&&r);"paste"===e&&(r=!1!==o.onPaste(n)&&r);return r}),null,null)),(t()(),r.bc(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.value)}))}function l(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"div",[["class","editable-label readonly"]],null,null,null,null,null)),(t()(),r.bc(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.value)}))}function c(t){return r.dc(2,[r.Zb(671088640,1,{inputElement:0}),(t()(),r.Hb(1,0,null,null,4,"div",[["class","editable-label-container fx-ellipsis"]],[[2,"editable",null]],null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,u)),r.Gb(3,16384,null,0,o.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.wb(16777216,null,null,1,null,l)),r.Gb(5,16384,null,0,o.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,3,0,!n.readonly),t(e,5,0,n.readonly)}),(function(t,e){t(e,1,0,e.component.editable)}))}r.Db("editable-label",i.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"editable-label",[],null,null,null,c,s)),r.Gb(1,4243456,null,0,i.a,[],null,null)],null,null)}),{value:"value",readonly:"readonly",allowEmpty:"allowEmpty",focus:"focus",selectAll:"selectAll"},{changedText:"changedText"},[])},LC7v:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e}(n("hSRu").a)},LLEj:function(t,e,n){"use strict";var r=n("D57K"),o=(n("Wpmq"),n("U3QC")),i=n("4HYP"),a=n("mhnT"),s=n("z5yO"),u=n("Jg5f"),l=n("AouM"),c=function(t){function e(e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var i=t.call(this,e,n,r,o)||this;return i.offsetX=n.nativeEvent.offsetX,i.offsetY=n.nativeEvent.offsetY,i.clientX=n.nativeEvent.clientX,i.clientY=n.nativeEvent.clientY,i}return r.e(e,t),e}(n("MvFr").a),p=function(t){function e(e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var i=t.call(this,e,n,r,o)||this;return i.setRelatedShape(n),i}return r.e(e,t),e}(c),d=n("ljsB"),f=n("5xGT"),h=n("gQst"),g=n("iUUs"),b=n("d62g"),m=n("5p5l"),y=n("pN2L"),v=n("/xGf");n.d(e,"a",(function(){return O}));var O=function(){function t(t,e){this.commandService=t,this.vToDcoordinate=e,this.zoomSensitivity=1/800,this.panSensitivity=.25,this.subs=[]}return t.prototype.initialize=function(t,e,n){var r=this;this.diagramCanvas=t,this.interactionCanvas=e,this.gridCanvas=n;var i=this.getStageWheelOnNoKeysDown().pipe(Object(o.a)((function(t){r.updatePan(-t.pixelX*r.panSensitivity,-t.pixelY*r.panSensitivity)}))),a=this.getStageWheelOnCtrlKeyDown().pipe(Object(o.a)((function(t){return r.updateZoom(1-t.pixelY*r.zoomSensitivity,t.offsetX,t.offsetY)}))),s=this.getAllCanvasMouseCapture().pipe(Object(o.a)((function(){return r.interactionCanvas.canvas.focus()})));return Object(h.a)(i,a,s)},t.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.diagramCanvas=void 0,this.interactionCanvas=void 0,this.gridCanvas=void 0},t.prototype.getShapeTouch=function(){var t=this;return this.getShapes().pipe(Object(i.a)((function(e){return Object(g.a)(e,"mousedown").pipe(Object(a.a)(Object(g.a)(t.diagramCanvas,"childRemoved").pipe(Object(s.a)((function(t){return t.child===e})))))})),Object(u.a)((function(t){return t})))},t.prototype.getShapes=function(){var t=this;return Object(b.a)(Object(m.a)(0,this.diagramCanvas.numChildren).pipe(Object(u.a)((function(e){return t.diagramCanvas.getChildAt(e)}))),Object(g.a)(this.diagramCanvas,"childAdded").pipe(Object(u.a)((function(t){return t.child}))))},t.prototype.getShapeRightClick=function(){return this.getShapeTouch().pipe(Object(s.a)((function(t){return 2===t.nativeEvent.button})),Object(u.a)((function(t){return new p("shapeRightClick",t)})))},t.prototype.getAllCanvas=function(){return Object(y.a)(this.diagramCanvas,this.interactionCanvas,this.gridCanvas)},t.prototype.getAllCanvasMouseCapture=function(){return this.getAllCanvas().pipe(Object(i.a)((function(t){return Object(h.a)(Object(g.a)(t,"mousedown",{capture:!0}),Object(g.a)(t,"pressmove",{capture:!0}),Object(g.a)(t,"pressup",{capture:!0}))})),Object(u.a)((function(t){return t})))},t.prototype.getStageDrag=function(t){return Object(g.a)(t,"stagemousedown").pipe(Object(l.a)((function(){return Object(g.a)(t,"stagemousemove").pipe(Object(a.a)(Object(g.a)(t,"stagemouseup")))})),Object(u.a)((function(t){return t})))},t.prototype.getStageMouseDown=function(t){return Object(g.a)(t,"mousedown").pipe(Object(u.a)((function(t){return t})))},t.prototype.getStagePressUp=function(t){return Object(g.a)(t,"pressup").pipe(Object(u.a)((function(t){return t})))},t.prototype.getStageWheel=function(){return Object(h.a)(Object(g.a)(this.interactionCanvas.canvas,"gesturestart"),Object(g.a)(this.interactionCanvas.canvas,"gesturechange"),Object(g.a)(this.interactionCanvas.canvas,"gestureend"),Object(g.a)(this.interactionCanvas.canvas,"wheel")).pipe(Object(u.a)((function(t){if("gesturestart"===t.type||"gesturechange"===t.type||"gestureend"===t.type){var e=t.scale>1?-1*t.scale:t.scale+1.5;t.pixelY=e,t.offsetX=t.clientX,t.offsetY=t.clientY,t.gesture=!0}else{var n=v(t);t.pixelX=n.pixelX,t.pixelY=n.pixelY,t.gesture=!1}return t})),Object(o.a)((function(t){return t.preventDefault()})))},t.prototype.getStageWheelOnCtrlKeyDown=function(){return this.getStageWheel().pipe(Object(s.a)((function(t){return t.ctrlKey||t.metaKey||t.gesture})),Object(u.a)((function(t){return t})))},t.prototype.getStageWheelOnNoKeysDown=function(){return this.getStageWheel().pipe(Object(s.a)((function(t){return!t.metaKey&&!t.ctrlKey&&!t.gesture})),Object(u.a)((function(t){return t})))},t.prototype.getStageRightClick=function(t){return this.getStageMouseDown(t).pipe(Object(s.a)((function(t){return 2===t.nativeEvent.button})),Object(u.a)((function(t){return new c("canvasRightClick",t)})))},t.prototype.getInteractionRightClick=function(t){return this.getStageMouseDown(t).pipe(Object(s.a)((function(t){return 2===t.nativeEvent.button})),Object(u.a)((function(t){return new p("shapeRightClick",t)})))},t.prototype.updatePan=function(t,e){this.commandService.dispatch(d.a.panDiagram,{dx:t,dy:e,animate:!1})},t.prototype.updateZoom=function(t,e,n){this.commandService.dispatch(d.a.zoomDiagram,{delta:t,toX:e,toY:n,animate:!1})},t.prototype.getCursor=function(){return Object(y.a)(this.defaultCursor)},t.prototype.getObjectsUnderPoint=function(t){return r.k(this.interactionCanvas.getObjectsUnderPoint(t.x,t.y,0),this.diagramCanvas.getObjectsUnderPoint(this.vToDcoordinate.x(t.x),this.vToDcoordinate.y(t.y),0)).filter((function(t){return!!t.getCursor}))},t.prototype.getCursorByContext=function(t,e){var n=t.find((function(t){var n=t.getCursor(e);return n&&(!!n.cursor||!!n.tail)}));return n?n.getCursor(e):this.defaultCursor},t.prototype.pointerMove=function(){return Object(g.a)(this.interactionCanvas,"stagemousemove").pipe(Object(u.a)((function(t){return{x:t.stageX,y:t.stageY}})))},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r.e(e,t)}(f.jb)},MvFr:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("D57K"),o=n("deqJ"),i=n("h1tj"),a=function(t){function e(e,n,r,o){void 0===r&&(r=!0),void 0===o&&(o=!0);var i=t.call(this,e,r,o)||this;return i.relatedMouseEvent=n,i.relatedShape=n.target,i}return r.e(e,t),e.prototype.setRelatedShape=function(t){if(t.target instanceof o.a)this.relatedShape=t.target;else if(t.currentTarget instanceof o.a)this.relatedShape=t.currentTarget;else for(var e=t.target;e&&e.parent;){if(e.parent instanceof o.a){this.relatedShape=e.parent;break}e=e.parent}},e}(i.Event)},O6K7:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r,o=n("D57K"),i=n("MvFr");!function(t){t.CreateComment="create-comment"}(r||(r={}));var a=function(t){function e(e,n){var r=t.call(this,e,n,!0,!0)||this;return r.relatedShape=null,r.setRelatedShape(n),r}return o.e(e,t),e.prototype.getShapeId=function(){return this.relatedShape?this.relatedShape.name:null},e.prototype.getPosition=function(){return{x:this.relatedMouseEvent.stageX,y:this.relatedMouseEvent.stageY}},e}(i.a)},PGgW:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e}(n("hSRu").a)},QCJn:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e}(n("hSRu").a)},"S83/":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("D57K"),o=n("h1tj"),i=n("d9YI"),a=n("nsO7"),s=n("fQLH"),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.get=function(t,n,r,i){return i&&o.Tween.removeTweens(t),new e(t,n,r)},e.simulate=function(t){return this.get(t)},e.prototype.to=function(e,n,r){return t.prototype.to.call(this,e,n,r),this.propNames=Object.keys(e),this},e.prototype.cancel=function(){this.completed||(this.removeFromTweens(),this.clear())},Object.defineProperty(e.prototype,"completed",{get:function(){return this.position>=this.duration},enumerable:!0,configurable:!0}),e.prototype.changes=function(){var t=this;return this._progress?this._progress:this.completed?Object(i.b)():(this._progress=new s.a,this.addEventListener("change",(function(){t._progress.next(Object(a.pick)(t.target,t.propNames))})),this.call((function(){t._progress.next(Object(a.pick)(t.target,t.propNames)),t.clear()})),this._progress)},e.prototype.removeFromTweens=function(){var t=o.Tween._tweens,e=t.indexOf(this);e>-1&&t.splice(e,1),this._paused=!0},e.prototype.clear=function(){this._progress&&(this._progress.complete(),this.removeAllEventListeners("change"),this._progress=void 0)},e}(o.Tween)},SKSx:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return u}));var r=n("D57K"),o=n("h1tj"),i=n("g3Dv"),a=n("C0rp"),s=function(t){function e(e,n,r,o,i,a){var s=t.call(this)||this;return s.value=e,s.text=n,s.width=i,s.height=a,s.graphics.clear(),s.graphics.beginFill("rgba(0,0,0,0.01)"),s.graphics.drawRect(0,0,s.width,s.height),s.graphics.endFill(),s.x=r,s.y=o,s}return r.e(e,t),e.prototype.getCursor=function(t){return{cursor:"pointer",tail:null,type:"css"}},e}(o.Shape),u=function(t){function e(e,n){var r=t.call(this)||this;r.text=e,r.origin=n;var o=a.document(i.c);return o.load(e.content),o.width(e.width),o.getLinksData().forEach((function(t){var e=new s(t.value,t.text,t.x,t.y,t.width,t.height);r.addChild(e)})),r}return r.e(e,t),e.prototype.destroy=function(){},e}(o.Container)},T4Sa:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var r=n("D57K"),o=n("3+4Q"),i=n("5xGT"),a=n("qMyy"),s=n("yn08"),u=n("LiEJ"),l=n("fQLH"),c=n("3riI"),p=n("pN2L"),d=n("iUUs"),f=n("U3QC"),h=n("lqvn"),g=n("R+ki"),b=n("Jg5f"),m=n("G2Mx"),y=n("AouM"),v=n("z5yO"),O=n("mhnT"),S=n("g3Dv"),C=(n("hX56"),n("4y1S")),x=n("nsO7"),w=n("ljsB"),j=(n("QoSw"),n("lu3Q"),n("sXdR")),I=function(){function t(t,e,n,r,o,i,a){var s=this;this.commands=t,this.state=e,this.datastore=n,this.userLocator=r,this.translateService=o,this.ll=i,this.cursorGen=a,this.toggleEnabled=new u.a(!1),this.toggleCommandHandler=new l.a,this.intervalDuration=3e3,this.toggleThrottle=400,this.isCommentMode=new u.a(!1),this.buttonCursor=new l.a,this.subs=[],this.subs.push(this.getHideHelpMessageInteraction().subscribe((function(){return s.isCommentMode.next(!1)})),this.state.changes("CurrentDiagram").pipe(Object(f.a)((function(t){s.diagramId=t,s.unresolvedComments=s.getUnresolvedComments(),s.resolvedComments=s.getResolvedComments(),s.showDefaultMessage=s.shouldShowDefaultMessage(),s.resolvedLabel=s.getResolvedLabel()}))).subscribe(),this.checkForNewComments().subscribe(),this.getCommentToggleState().subscribe(),this.handleToggleChange().subscribe(),this.handleCancelKeyboardEvent().subscribe(),this.state.changes("CurrentInteractionHandler").pipe(Object(h.a)((function(t,e){return t.type===e.type})),Object(f.a)((function(t){var e=t.injector.get(t.type).defaultCursor;s.buttonCursor.next(s.getButtonCursor(e))}))).subscribe())}return t.prototype.handleCommentToggle=function(t){this.toggleCommandHandler.next(t)},t.prototype.handleToggleChange=function(){var t=this;return this.toggleCommandHandler.pipe(Object(g.a)(this.toggleThrottle),Object(j.lodashThrottle)(this.toggleThrottle,{leading:!1,trailing:!0}),Object(f.a)((function(e){t.commands.dispatch(C.n.updateUserPreference,{preferenceName:"show_comment_indicator",value:e})})))},t.prototype.getButtonCursor=function(t){return t&&"cur"===t.type&&"comment"===t.cursor?this.cursorGen.getCursorIcon(t):"pointer"},t.prototype.handleCommentItemClick=function(t){var e=this;i.lb.track("right.comment.show",{value1Type:"trigger",value1:"panel"}),this.ll.forCurrent(!1).getDiagramOnce().pipe(Object(f.a)((function(n){n.shapes&&n.shapes[t.shapeId]?e.commands.dispatch(w.a.focusToPoint,{shapeIds:[t.shapeId],coordinates:t.locOnDiagram}):e.commands.dispatch(w.a.focusToPoint,{shapeIds:null,coordinates:t.locOnDiagram})}))).subscribe();var n={visible:!0,threadId:t.id,comments:[t]};this.state.set("CommentThreadData",n)},t.prototype.updateSelectedProperty=function(t){var e=this;return this.state.changes("CommentThreadData").pipe(Object(b.a)((function(n){return n.visible?t.map((function(t){return t.parentComment.id===n.threadId?(t.selected=!0,e.startMarkSeenByTimer(t.parentComment)):t.selected=!1,t})):t.map((function(t){return t.selected=!1,t}))})))},t.prototype.startMarkSeenByTimer=function(t){var e=this;setTimeout((function(){return r.c(e,void 0,void 0,(function(){return r.f(this,(function(e){return this.markSeenBy(t),[2]}))}))}),this.intervalDuration)},t.prototype.markSeenBy=function(t){var e=this;this.datastore.find(o.a,{diagramId:this.diagramId,parentId:t.id}).pipe(Object(m.a)(1),Object(f.a)((function(n){var r=[];e.shouldAddSeenBy(t)&&r.push(t.id),n.forEach((function(t){e.shouldAddSeenBy(t)&&r.push(t.id)})),r.length>0&&e.commands.dispatch(a.a.markCommentSeen,{commentIds:r,userId:e.state.get("CurrentUser")})}))).subscribe()},t.prototype.shouldAddSeenBy=function(t){var e=this.state.get("CurrentUser");return t.userId!==e&&!t.seenBy.includes(e)},t.prototype.getCommentToggleState=function(){var t=this;return this.userLocator.getCommentToggleState().pipe(Object(h.a)(),Object(b.a)((function(e){t.toggleEnabled.next(e)})))},t.prototype.checkForNewComments=function(){var t=this;return this.datastore.find(o.a,{diagramId:this.diagramId,$or:[{resolved:null},{resolved:!1}]}).pipe(Object(f.a)((function(e){for(var n=!1,r=0;r<e.length;r++)if(e[r].isNew(t.state.get("CurrentUser"))){n=!0;break}t.state.set("ShowSideBarButtonIndicator",{id:t.id,show:n})})))},t.prototype.shouldShowDefaultMessage=function(){return Object(c.b)(this.unresolvedComments,this.resolvedComments).pipe(Object(b.a)((function(t){var e=r.i(t,2),n=e[0],o=e[1];return 0===n.length&&0===o.length})))},t.prototype.getResolvedComments=function(){var t=this;return this.datastore.find(o.a,{diagramId:this.diagramId,parentId:null,resolved:{$exists:!0}}).pipe(Object(y.a)((function(e){return t.getCommentList(e)})),Object(y.a)((function(e){return e.length>0?t.updateCommentWithResolvedUser(e):Object(p.a)([])})))},t.prototype.updateCommentWithResolvedUser=function(t){var e=this;return c.b.apply(void 0,r.k(t.map((function(t){return e.userLocator.getUserInfo(t.parentComment.resolvedBy).pipe(Object(v.a)((function(t){return!!t})),Object(m.a)(1),Object(b.a)((function(e){return t.resolvedCommentor=e,t})))}))))},t.prototype.getUnresolvedComments=function(){var t=this;return this.datastore.find(o.a,{diagramId:this.diagramId,parentId:null,$and:[{$or:[{resolved:null},{resolved:!1}]}]}).pipe(Object(y.a)((function(e){return t.getCommentList(e)})),Object(y.a)((function(e){return t.updateSelectedProperty(e)})))},t.prototype.getCommentList=function(t){var e=this;return t&&t.length>0?c.b.apply(void 0,r.k(t.map((function(t){return e.getCommentItem(t)})))).pipe(Object(b.a)((function(t){return t=t.filter((function(t){return!t.latestComment.deleted})),Object(x.orderBy)(t,["lastUpdatedTime"],["desc"])}))):Object(p.a)([])},t.prototype.getCommentItem=function(t){var e=this;return this.datastore.find(o.a,{diagramId:this.diagramId,$or:[{deleted:null},{deleted:!1}],parentId:t.id},{sort:{lastUpdated:1}}).pipe(Object(y.a)((function(n){n.unshift(t);var o=e.getCommenterIds(n,2);return c.b.apply(void 0,r.k(o.map((function(t){return e.userLocator.getUserInfo(t).pipe(Object(v.a)((function(t){return!!t})),Object(m.a)(1))})))).pipe(Object(b.a)((function(r){return e.buildCommentItem(r[r.length-1],r[r.length-2],n.length,t,n[n.length-1],n[n.length-1].lastUpdated)})))})))},t.prototype.buildCommentItem=function(t,e,n,r,o,i){var a={threadCommenter:t,commentCount:n,latestComment:o,parentComment:r,lastUpdatedTime:i,selected:!1};return o.parentId||(o.parentId=null),e&&(a.previousThreadCommenter=e),a},t.prototype.getCommenterIds=function(t,e){var n,o,i=[];try{for(var a=r.l(t),s=a.next();!s.done;s=a.next()){var u=s.value;if(i.includes(u.userId)||i.push(u.userId),i.length>=e)break}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},t.prototype.onActive=function(){i.lb.track("right.comments.panel.click",{value1Type:"status",value1:"open"})},t.prototype.onInactive=function(){i.lb.track("right.comments.panel.click",{value1Type:"status",value1:"close"}),this.toggleAddCommentMode(!1)},Object.defineProperty(t,"openForContextAware",{get:function(){return"onlyAll"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return"diagramcomments"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return"comment"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tooltip",{get:function(){return this.translateService.instant("TOOLTIPS.DIAGRAM_COMMENTS")},enumerable:!0,configurable:!0}),t.prototype.handleAddButtonClick=function(){var t=this;Object(d.a)(this.cancelButton.nativeElement,"mouseover").pipe(Object(f.a)((function(t){return t.stopPropagation()})),Object(O.a)(Object(d.a)(this.container.nativeElement,"mouseover").pipe(Object(f.a)((function(){return t.buttonCursor.next(t.getButtonCursor())}))))).subscribe(),i.lb.track("right.comment.add.click",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!0)},t.prototype.handleCancelButtonClick=function(){i.lb.track("right.comment.cancel",{value1Type:"trigger",value1:"button-click"}),this.toggleAddCommentMode(!1)},t.prototype.toggleAddCommentMode=function(t){var e;e=t?{state:s.b.Comment}:{state:s.b.Normal},this.isCommentMode.next(t),this.commands.dispatch(a.a.changeMouseControlState,null,e)},t.prototype.handleCancelKeyboardEvent=function(){var t=this;return Object(d.a)(window,"keydown").pipe(Object(v.a)((function(t){return t.keyCode===S.f.Escape})),Object(f.a)((function(){i.lb.track("right.comment.cancel",{value1Type:"trigger",value1:"esc"}),t.toggleAddCommentMode(!1)})))},t.prototype.getHideHelpMessageInteraction=function(){return this.state.changes("MouseControlState").pipe(Object(v.a)((function(t){return t!==s.b.Comment})))},t.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},t.prototype.getResolvedLabel=function(){var t=this;return this.resolvedComments.pipe(Object(y.a)((function(e){return t.translate("COMMENTS.LABELS.RESOLVED",{noOfThreads:e.length})})))},t.prototype.translate=function(t,e){return this.translateService.get(t,e).pipe(Object(m.a)(1))},t}()},TQyE:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("R+ki"),o=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),s=n("nsO7"),u=function(){function t(){this._change=new o.a,this._isDiffColor=new i.a(!1),this._label=new i.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.pipe(Object(r.a)(100))},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=Object(s.clone)(t),void 0!==this._data.params&&(this._data.params.isDiffColor?(this._data.value="#FFFFFF",this._isDiffColor.next(!0)):this._isDiffColor.next(!1))},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this.colorpicker.nativeElement.style.backgroundColor=this._data.value,this._label.next(this._props.label)},t.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},t}()},W0Mc:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("D57K"),o=n("5xGT"),i=n("nsO7"),a=n("blAi"),s=function(){function t(){}return t.prototype.reconnect=function(t,e,n){var r=this,o=e.shapes[t],i=this.getConnectorEndpoints(o,n),a=i.map((function(t){return r.getConnectedShape(t,e)}));return this.reconnectEndpoints(o,i,a)},t.prototype.reconnectEndpoints=function(t,e,n){var o=this,i=r.i(e,2),a=i[0],s=i[1];return n.some((function(t){return!t}))||!a.shapeId||a.gluepointLocked||!s.shapeId||s.gluepointLocked?e.map((function(t,e){return t.shapeId?t:o.clearEndpointGluepoint(t)})).map((function(t,e){var r=!(!n[e]||!n[e].gluepoints[t.gluepointId]);return t.shapeId&&n[e]&&t.gluepointId&&r&&t.gluepointLocked?o.setEndpointPosition(t,n[e]):t})).map((function(r,i){var a=!(!n[i]||!n[i].gluepoints[r.gluepointId]);if(r.shapeId&&n[i]&&(!r.gluepointLocked||!a)){var s=e[0===i?1:0],u=0===i?"from":"to";return o.setEndpointGluepoint(t,r,s,n[i],u)}return r})):this.selectClosestGluepointPair(t,e,n)},t.prototype.selectClosestGluepointPair=function(t,e,n){var i=this,a=r.i(e,2),s=a[0],u=a[1],l=r.i(n,2),c=l[0],p=l[1],d=c.getAvailableGluepoints([t.id],"from"),f=c.getStickyGluePoints(s.gluepointId);d.push.apply(d,r.k(f));var h=p.getAvailableGluepoints([t.id],"to"),g=p.getStickyGluePoints(u.gluepointId);h.push.apply(h,r.k(g));for(var b,m=d.map((function(t){return i.getGluepointPosition(t,c)})),y=h.map((function(t){return i.getGluepointPosition(t,p)})),v=1/0,O=0;O<d.length;++O)for(var S=d[O],C=m[O],x=o.S.from(C),w=0;w<h.length;++w){var j=h[w];if(s.shapeId!==u.shapeId||S.id!==j.id){var I=y[w],P=x.distanceTo(I);P<v&&(b=[S,j],v=P)}}return b&&b.length>0?(s.gluepointId=b[0].id.split("-stickyGP")[0],s.gluepointLocked=!1,u.gluepointId=b[1].id.split("-stickyGP")[0],u.gluepointLocked=!1,[this.setEndpointPosition(s,c),this.setEndpointPosition(u,p)]):e},t.prototype.getGluepointPosition=function(t,e){return a.a.getPosition(t,e.defaultBounds,e.transform)},t.prototype.getConnectorEndpoints=function(t,e){var n,o,a=t.getPoints(),s=[a[0],Object(i.last)(a)],u=function(t){var e=s.findIndex((function(e){return t.id===e.id}));s[e]=r.a({},s[e],t)};try{for(var l=r.l(e),c=l.next();!c.done;c=l.next()){u(c.value)}}catch(p){n={error:p}}finally{try{c&&!c.done&&(o=l.return)&&o.call(l)}finally{if(n)throw n.error}}return Object(i.cloneDeep)(s)},t.prototype.getConnectedShape=function(t,e){return t.shapeId?e.shapes[t.shapeId]:null},t.prototype.setEndpointPosition=function(t,e){var n=e.getGluepointPosition(t.gluepointId);return t.x=n.x,t.y=n.y,t},t.prototype.setEndpointGluepoint=function(t,e,n,r,o){var i=r.getAvailableGluepointsByPos(n,[t.id],o),a=e.shapeId===n.shapeId?i.filter((function(t){return t.gluepoint.id!==n.gluepointId})):i;return a.length>0&&(e.gluepointId=a[0].gluepoint.id,e.gluepointLocked=!1),this.setEndpointPosition(e,r)},t.prototype.clearEndpointGluepoint=function(t){return t.shapeId=null,t.gluepointId=null,t.gluepointLocked=null,t},t}()},W9bu:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("D57K"),o=n("G2Mx"),i=n("AouM"),a=(n("xnGY"),n("ljsB")),s=n("Jzy8"),u=(n("5xGT"),function(){function t(t,e,n,r){this.modelSubManager=t,this.commandService=e,this.state=n,this.router=r}return t.prototype.navigate=function(t){t instanceof s.r||(t=s.r.fromUrl(t.link));var e=t.linkedDiagramId;if(e===this.state.get("CurrentDiagram"))"SHAPE"===t.type?this.navigateToShape(t.targetId):"GROUP"===t.type&&this.navigateToGroup(t.targetId);else if(e){var n="SHAPE"===t.type?["shape",t.targetId]:"GROUP"===t.type?["group",t.targetId]:[];this.navigateToDiagram(e,n).subscribe()}else this.state.set("WebLinkViewer",{open:!0,link:t.link})},t.prototype.navigateToShape=function(t){this.commandService.dispatch(a.a.focusToPoint,{shapeIds:[t]}),this.state.set("ShapelinkTarget",{shapeId:t})},t.prototype.navigateToGroup=function(t){this.commandService.dispatch(a.a.focusToPoint,{groupId:t}),this.state.set("ShapelinkTarget",{groupId:t})},t.prototype.navigateToDiagram=function(t,e){var n=this;return void 0===e&&(e=[]),this.modelSubManager.stop(this.state.get("CurrentDiagram"),!0).pipe(Object(o.a)(1),Object(i.a)((function(){return n.router.navigate(r.k(["../",t,"edit"],e))})))},t}())},X5Q9:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("LiEJ"),o=n("fQLH"),i=n("d9YI"),a=n("pN2L"),s=(n("NNJu"),function(){function t(){this._data=new r.a(null),this.styleType=new r.a(null),this.styles=new r.a(null),this.change=new o.a}return t.prototype.ngAfterViewInit=function(){var t=this;this.absDropdown.changed.subscribe((function(e){var n=t.data.documentStyles.find((function(t){return t.style.id===e[0]}));if(n)delete n.style.lineThickness,t.change.next(n.style);else{var r=t.styles.getValue().find((function(t){return t.id===e[0]}));delete r.lineThickness,t.change.next(r)}}))},t.prototype.setData=function(t){this.data=t,this._data.next(t),this.styles.next(this.data.palettes[0].palette.styles),this.styleType.next(null)},t.prototype.apply=function(){},t.prototype.applyAnimated=function(){return Object(i.b)()},t.prototype.setProperties=function(t){this.props=t},t.prototype.getIconHref=function(t){return"./assets/icons/symbol-defs.svg#nu-ic-"+t},t.prototype.handleOnclickIcon=function(t){this.styleType.next(t),this.styles.next(this.data.palettes.find((function(e){return e.id===t})).palette.styles)},t.prototype.getStyleType=function(){return this.styleType.getValue()||2!==this.data.palettes.length?this.styleType.getValue()||3!==this.data.palettes.length?this.styleType:Object(a.a)("fillColor"):Object(a.a)("lineColor")},t}())},XWWj:function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){var t="undefined"==typeof window,e=new Map,n=new Map,r=[];r.total=0;var o=[],i=[];function a(){e.clear(),n.clear(),o=[],i=[]}function s(t){for(var e=-9007199254740991,n=t.length-1;n>=0;--n){var r=t[n];if(null!==r){var o=r.score;o>e&&(e=o)}}return-9007199254740991===e?null:e}function u(t,e){var n=t[e];if(void 0!==n)return n;var r=e;Array.isArray(e)||(r=e.split("."));for(var o=r.length,i=-1;t&&++i<o;)t=t[r[i]];return t}function l(t){return"object"==typeof t}var c=function(){var t=[],e=0,n={};function r(){for(var n=0,r=t[n],o=1;o<e;){var i=o+1;n=o,i<e&&t[i].score<t[o].score&&(n=i),t[n-1>>1]=t[n],o=1+(n<<1)}for(var a=n-1>>1;n>0&&r.score<t[a].score;a=(n=a)-1>>1)t[n]=t[a];t[n]=r}return n.add=function(n){var r=e;t[e++]=n;for(var o=r-1>>1;r>0&&n.score<t[o].score;o=(r=o)-1>>1)t[r]=t[o];t[r]=n},n.poll=function(){if(0!==e){var n=t[0];return t[0]=t[--e],r(),n}},n.peek=function(n){if(0!==e)return t[0]},n.replaceTop=function(e){t[0]=e,r()},n},p=c();return function d(f){var h={single:function(t,e,n){return t?(l(t)||(t=h.getPreparedSearch(t)),e?(l(e)||(e=h.getPrepared(e)),((n&&void 0!==n.allowTypo?n.allowTypo:!f||void 0===f.allowTypo||f.allowTypo)?h.algorithm:h.algorithmNoTypo)(t,e,t[0])):null):null},go:function(t,e,n){if(!t)return r;var o=(t=h.prepareSearch(t))[0],i=n&&n.threshold||f&&f.threshold||-9007199254740991,a=n&&n.limit||f&&f.limit||9007199254740991,c=(n&&void 0!==n.allowTypo?n.allowTypo:!f||void 0===f.allowTypo||f.allowTypo)?h.algorithm:h.algorithmNoTypo,d=0,g=0,b=e.length;if(n&&n.keys)for(var m=n.scoreFn||s,y=n.keys,v=y.length,O=b-1;O>=0;--O){for(var S=e[O],C=new Array(v),x=v-1;x>=0;--x)(I=u(S,j=y[x]))?(l(I)||(I=h.getPrepared(I)),C[x]=c(t,I,o)):C[x]=null;C.obj=S;var w=m(C);null!==w&&(w<i||(C.score=w,d<a?(p.add(C),++d):(++g,w>p.peek().score&&p.replaceTop(C))))}else if(n&&n.key){var j=n.key;for(O=b-1;O>=0;--O)(I=u(S=e[O],j))&&(l(I)||(I=h.getPrepared(I)),null!==(P=c(t,I,o))&&(P.score<i||(P={target:P.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:P.score,indexes:P.indexes,obj:S},d<a?(p.add(P),++d):(++g,P.score>p.peek().score&&p.replaceTop(P)))))}else for(O=b-1;O>=0;--O){var I,P;(I=e[O])&&(l(I)||(I=h.getPrepared(I)),null!==(P=c(t,I,o))&&(P.score<i||(d<a?(p.add(P),++d):(++g,P.score>p.peek().score&&p.replaceTop(P)))))}if(0===d)return r;var T=new Array(d);for(O=d-1;O>=0;--O)T[O]=p.poll();return T.total=d+g,T},goAsync:function(e,n,o){var i=!1,a=new Promise((function(a,p){if(!e)return a(r);var d=(e=h.prepareSearch(e))[0],g=c(),b=n.length-1,m=o&&o.threshold||f&&f.threshold||-9007199254740991,y=o&&o.limit||f&&f.limit||9007199254740991,v=(o&&void 0!==o.allowTypo?o.allowTypo:!f||void 0===f.allowTypo||f.allowTypo)?h.algorithm:h.algorithmNoTypo,O=0,S=0;function C(){if(i)return p("canceled");var c=Date.now();if(o&&o.keys)for(var f=o.scoreFn||s,x=o.keys,w=x.length;b>=0;--b){for(var j=n[b],I=new Array(w),P=w-1;P>=0;--P)(k=u(j,D=x[P]))?(l(k)||(k=h.getPrepared(k)),I[P]=v(e,k,d)):I[P]=null;I.obj=j;var T=f(I);if(null!==T&&!(T<m)&&(I.score=T,O<y?(g.add(I),++O):(++S,T>g.peek().score&&g.replaceTop(I)),b%1e3==0&&Date.now()-c>=10))return void(t?setImmediate(C):setTimeout(C))}else if(o&&o.key){for(var D=o.key;b>=0;--b)if((k=u(j=n[b],D))&&(l(k)||(k=h.getPrepared(k)),null!==(E=v(e,k,d))&&!(E.score<m)&&(E={target:E.target,_targetLowerCodes:null,_nextBeginningIndexes:null,score:E.score,indexes:E.indexes,obj:j},O<y?(g.add(E),++O):(++S,E.score>g.peek().score&&g.replaceTop(E)),b%1e3==0&&Date.now()-c>=10)))return void(t?setImmediate(C):setTimeout(C))}else for(;b>=0;--b){var k,E;if((k=n[b])&&(l(k)||(k=h.getPrepared(k)),null!==(E=v(e,k,d))&&!(E.score<m)&&(O<y?(g.add(E),++O):(++S,E.score>g.peek().score&&g.replaceTop(E)),b%1e3==0&&Date.now()-c>=10)))return void(t?setImmediate(C):setTimeout(C))}if(0===O)return a(r);for(var A=new Array(O),M=O-1;M>=0;--M)A[M]=g.poll();A.total=O+S,a(A)}t?setImmediate(C):C()}));return a.cancel=function(){i=!0},a},highlight:function(t,e,n){if(null===t)return null;void 0===e&&(e="<b>"),void 0===n&&(n="</b>");for(var r="",o=0,i=!1,a=t.target,s=a.length,u=t.indexes,l=0;l<s;++l){var c=a[l];if(u[o]===l){if(i||(i=!0,r+=e),++o===u.length){r+=c+n+a.substr(l+1);break}}else i&&(i=!1,r+=n);r+=c}return r},prepare:function(t){if(t)return{target:t,_targetLowerCodes:h.prepareLowerCodes(t),_nextBeginningIndexes:null,score:null,indexes:null,obj:null}},prepareSlow:function(t){if(t)return{target:t,_targetLowerCodes:h.prepareLowerCodes(t),_nextBeginningIndexes:h.prepareNextBeginningIndexes(t),score:null,indexes:null,obj:null}},prepareSearch:function(t){if(t)return h.prepareLowerCodes(t)},getPrepared:function(t){if(t.length>999)return h.prepare(t);var n=e.get(t);return void 0!==n?n:(n=h.prepare(t),e.set(t,n),n)},getPreparedSearch:function(t){if(t.length>999)return h.prepareSearch(t);var e=n.get(t);return void 0!==e?e:(e=h.prepareSearch(t),n.set(t,e),e)},algorithm:function(t,e,n){for(var r=e._targetLowerCodes,a=t.length,s=r.length,u=0,l=0,c=0,p=0;;){if(n===r[l]){if(o[p++]=l,++u===a)break;n=t[0===c?u:c===u?u+1:c===u-1?u-1:u]}if(++l>=s)for(;;){if(u<=1)return null;if(0===c){if(n===t[--u])continue;c=u}else{if(1===c)return null;if((n=t[1+(u=--c)])===t[u])continue}l=o[(p=u)-1]+1;break}}u=0;var d=0,f=!1,g=0,b=e._nextBeginningIndexes;null===b&&(b=e._nextBeginningIndexes=h.prepareNextBeginningIndexes(e.target));var m=l=0===o[0]?0:b[o[0]-1];if(l!==s)for(;;)if(l>=s){if(u<=0){if(++d>a-2)break;if(t[d]===t[d+1])continue;l=m;continue}--u,l=b[i[--g]]}else if(t[0===d?u:d===u?u+1:d===u-1?u-1:u]===r[l]){if(i[g++]=l,++u===a){f=!0;break}++l}else l=b[l];if(f)var y=i,v=g;else y=o,v=p;for(var O=0,S=-1,C=0;C<a;++C)S!==(l=y[C])-1&&(O-=l),S=l;for(f?0!==d&&(O+=-20):(O*=1e3,0!==c&&(O+=-20)),O-=s-a,e.score=O,e.indexes=new Array(v),C=v-1;C>=0;--C)e.indexes[C]=y[C];return e},algorithmNoTypo:function(t,e,n){for(var r=e._targetLowerCodes,a=t.length,s=r.length,u=0,l=0,c=0;;){if(n===r[l]){if(o[c++]=l,++u===a)break;n=t[u]}if(++l>=s)return null}u=0;var p=!1,d=0,f=e._nextBeginningIndexes;if(null===f&&(f=e._nextBeginningIndexes=h.prepareNextBeginningIndexes(e.target)),(l=0===o[0]?0:f[o[0]-1])!==s)for(;;)if(l>=s){if(u<=0)break;--u,l=f[i[--d]]}else if(t[u]===r[l]){if(i[d++]=l,++u===a){p=!0;break}++l}else l=f[l];if(p)var g=i,b=d;else g=o,b=c;for(var m=0,y=-1,v=0;v<a;++v)y!==(l=g[v])-1&&(m-=l),y=l;for(p||(m*=1e3),m-=s-a,e.score=m,e.indexes=new Array(b),v=b-1;v>=0;--v)e.indexes[v]=g[v];return e},prepareLowerCodes:function(t){for(var e=t.length,n=[],r=t.toLowerCase(),o=0;o<e;++o)n[o]=r.charCodeAt(o);return n},prepareBeginningIndexes:function(t){for(var e=t.length,n=[],r=0,o=!1,i=!1,a=0;a<e;++a){var s=t.charCodeAt(a),u=s>=65&&s<=90,l=u||s>=97&&s<=122||s>=48&&s<=57,c=u&&!o||!i||!l;o=u,i=l,c&&(n[r++]=a)}return n},prepareNextBeginningIndexes:function(t){for(var e=t.length,n=h.prepareBeginningIndexes(t),r=[],o=n[0],i=0,a=0;a<e;++a)o>a?r[a]=o:(o=n[++i],r[a]=void 0===o?e:o);return r},cleanup:a,new:d};return h}()})?r.apply(e,o):r)||(t.exports=i)},ZZOX:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("D57K"),o=n("NNJu"),i=(n("5xGT"),n("LiEJ")),a=n("o9on"),s=function(t){function e(e,n,r){var o=t.call(this)||this;return o.modalController=e,o.commandService=n,o.translate=r,o.allFolderId="all",o.allFolderName="All Folders",o.subs=[],o.folderList=new i.a(null),o.selectedFolders=new i.a(0),o.showImportStartMessage=new i.a(!1),o}return r.e(e,t),e.prototype.ngOnInit=function(){var t=this,e=this.showWindow(this.container,this.containerInner).subscribe();this.subs.push(e),this.commandService.dispatch(a.a.getClassicProjects,{callBack:function(e){t.populateProjects(e)}})},e.prototype.closeOnOverlayClick=function(t){var e=t.target.className;e&&"string"===typeof e&&e.includes("modal-window-container")&&this.closeWindow()},e.prototype.closeWindow=function(){var t=this,e=this.hideWindow(this.container,this.containerInner).subscribe({complete:function(){t.modalController.hide()}});this.subs.push(e)},e.prototype.ngOnDestroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe()},e.prototype.toggleSelect=function(t){var e=this,n=this.folderList.value;t.value===this.allFolderId?t.checked?n.forEach((function(t){t.checked=!0})):n.forEach((function(t){t.checked=!1})):t.checked?n.filter((function(e){return e.id===t.value})).forEach((function(t){t.checked=!0})):n.filter((function(n){return n.id===t.value||n.id===e.allFolderId})).forEach((function(t){t.checked=!1}));var r=n.filter((function(t){return t.id!==e.allFolderId&&t.checked})).length;this.selectedFolders.next(r)},e.prototype.startImport=function(){var t=this,e=this.folderList.value.filter((function(e){return e.id!==t.allFolderId&&e.checked})).map((function(t){return t.id}));this.commandService.dispatch(a.a.importClassicProjects,{rid:e.join(",")}),this.showImportStartMessage.next(!0)},e.prototype.populateProjects=function(t){var e=[{id:this.allFolderId,name:this.allFolderName,checked:!1}],n=t.map((function(t){return{id:t.id,name:t.name,checked:!1}}));e.push.apply(e,r.k(n)),this.folderList.next(e)},e}(o.h)},aSzn:function(t,e,n){"use strict";n.d(e,"a",(function(){return E}));var r=n("D57K"),o=n("LoAr"),i=n("5xGT"),a=n("g3Dv"),s=n("nsO7"),u=n("gQst"),l=n("pN2L"),c=n("cQOC"),p=n("d9YI"),d=n("AouM"),f=n("Jg5f"),h=n("W/Ou"),g=n("R+ki"),b=n("U3QC"),m=n("z5yO"),y=n("pday"),v=n("lqvn"),O=n("12aA"),S=n("cGAd"),C=n("w1VY"),x=n("QoSw"),w=n("flPR"),j=n("SBw3"),I=n("0fSw"),P=n("IGWl"),T=n("PGgW"),D=n("X5Q9"),k=n("eIBf"),E=function(t){function e(e,n,r,o,i,a,s){var u=t.call(this,o)||this;return u.injector=e,u.commandService=n,u.featureList=r,u.state=o,u.ll=i,u.toolbarManager=a,u.coordinate=s,u.modelChangeDebounce=100,u.subs=[],u}return r.e(e,t),Object.defineProperty(e.prototype,"toolbar",{get:function(){return this.toolbarManager.get("contextual-toolbar")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!0,configurable:!0}),e.prototype.initialize=function(){var t=this;this.subs.push(this.listenToChanges().pipe(Object(d.a)((function(e){return t.getItemsForContextChange(e)})),Object(f.a)((function(e){return t.updateShowMethod(e)})),Object(d.a)((function(e){return t.handleContextChange(e)}))).subscribe(),this.toolbar.change.subscribe((function(e){return t.handleToolbarChange(e)})))},e.prototype.listenToChanges=function(){var t=this;return this.listenToContextChange().pipe(Object(d.a)((function(e){return t.isShowAction(e.action)?Object(u.a)(t.listenToModelChange(),t.listenToGroupChanges()).pipe(Object(h.a)(e),Object(g.a)(t.modelChangeDebounce)):Object(l.a)(e)})))},e.prototype.listenToContextChange=function(){var t=this;return this.duringSelection().pipe(Object(d.a)((function(e){var n;return"show"===e.action?Object(u.a)(t.duringSelectionInteraction({action:"quickshow"},{action:"quickhide"}).pipe(Object(b.a)((function(e){return n=!t.isShowAction(e.action)}))),t.duringTextEdit({action:"show"},{action:"hide"}).pipe(Object(b.a)((function(e){return n=!t.isShowAction(e.action)}))),t.duringPan({action:"quickshow"},{action:"quickhide"}).pipe(Object(m.a)((function(){return!n})))):Object(l.a)(e)})),Object(y.a)(1),Object(v.a)(s.isEqual))},e.prototype.listenToGroupChanges=function(){return this.locator.getDiagramChanges().pipe(Object(m.a)((function(t){return i.O.hasChanges(t.modifier,"groups")})),Object(O.a)({action:"show"}))},e.prototype.checkSelectedShapesHasUnlocked=function(){var t=this;return this.state.changes("Selected").pipe(Object(d.a)((function(e){return t.locator.getDiagramOnce().pipe(Object(f.a)((function(t){var n,o;try{for(var i=r.l(e),a=i.next();!a.done;a=i.next()){var s=a.value;if(!t.shapes[s].isLocked)return!0}}catch(u){n={error:u}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return!1})))})))},e.prototype.listenToModelChange=function(){var t=this,e=this.state.get("Selected").map((function(e){return t.locator.getShapeModel(e).pipe(Object(S.a)(1),Object(O.a)({action:"quickshow"}))}));return u.a.apply(void 0,r.k(e))},e.prototype.duringSelection=function(){return this.checkSelectedShapesHasUnlocked().pipe(Object(f.a)((function(t){return t?{action:"show"}:{action:"hide"}})))},e.prototype.getItemsForContextChange=function(t){return this.isShowAction(t.action)?this.getToolbarItems().pipe(Object(f.a)((function(e){return t.items=e,t}))):Object(l.a)(t)},e.prototype.handleContextChange=function(t){var e=this;switch(t.action){case"show":case"quickshow":return this.setToolbarItems(t.items).pipe(Object(d.a)((function(){return e.positionToolbar()})),Object(d.a)((function(){return e.toolbar.show()})));case"reshow":return this.setToolbarItems(t.items).pipe(Object(d.a)((function(){return e.toolbar.hide()})),Object(d.a)((function(){return e.positionToolbar()})),Object(d.a)((function(){return e.toolbar.show()})));case"hide":case"quickhide":return this.toolbar.hide()}return Object(l.a)({})},e.prototype.isShowAction=function(t){return"show"===t||"reshow"===t||"quickshow"===t},e.prototype.updateShowMethod=function(t){if(this.isShowAction(t.action)){if(!t.items||t.items&&0===t.items.length)return t.action="hide",t;"show"===t.action&&(t.action="reshow")}return t},e.prototype.setToolbarItems=function(t){var e=this,n=this.toolbar.itemIds,o=t?t.map((function(t){return t.featureId})):[],i=[];return n.filter((function(t){return-1===o.indexOf(t)})).forEach((function(t){e.toolbar.removeItem(t)})),n.filter((function(t){return o.indexOf(t)>-1})).forEach((function(n){var r=Object(s.find)(t,{featureId:n});i.push(e.updateToolbarItem(r))})),o.forEach((function(r,o){if(-1===n.indexOf(r)){var a=Object(s.find)(t,{featureId:r});i.push(e.addToolbarItem(a,o))}})),i.length>0?c.a.apply(void 0,r.k(i)):Object(l.a)({})},e.prototype.addToolbarItem=function(t,e){var n=this,r=this.featureList.getFeature(t.featureId),o=this.getUIControlType(r.dataType,t.visibility?t.visibility.level:null),i=t.visibility?t.visibility.level:null;return this.getItemDataAndProperties(r,t.data).pipe(Object(f.a)((function(r){var a=r.data,s=r.controlProps;n.toolbar.addItem(t.featureId,o,a,s,e,i)})))},e.prototype.updateToolbarItem=function(t){var e=this,n=this.featureList.getFeature(t.featureId);return this.getItemDataAndProperties(n,t.data).pipe(Object(f.a)((function(n){var r=n.data,o=n.controlProps;e.toolbar.updateItem(t.featureId,r,o)})))},e.prototype.positionToolbar=function(){var t=this;return this.locator.getDiagramOnce().pipe(Object(f.a)((function(e){var n=t.state.get("Selected"),r=e.getBounds(n),o=t.coordinate.x(r.x)+t.coordinate.width(r.width)/2,i=t.coordinate.y(r.y);i-=t.isPlusCreateAvailable(e,n)||t.checkTransformAngle(e,n)?30:15,t.toolbar.position({x:o,y:i},"bottomcenter")})))},e.prototype.isPlusCreateAvailable=function(t,e){return!(1!==e.length||!t.shapes[e[0]]||!t.shapes[e[0]].create)},e.prototype.checkTransformAngle=function(t,e){if(1===e.length&&!t.shapes[e[0]].isConnector()){var n=t.shapes[e[0]].transform.angle;if(n>85||n<-175)return!0}return!1},e.prototype.handleToolbarChange=function(t){var e=this;i.lb.track("canvas.toolbar."+t.id+".change",{value1Type:"feature",value1:t.id,value2Type:"toolbar",value2:this.toolbar.id});var n=this.featureList.getFeature(t.id);if(n.transformer){var r=this.injector.get(n.transformer),o=Object(i.rb)((function(t){return e.commandService.dispatch(n.commandEvent,t)}));r.getApplyData(t.data).subscribe(o)}else{var a=i.k.mergeInstances({},this.getCommandData(t.id),t.data);this.commandService.dispatch(n.commandEvent,a)}},e.prototype.getCommandData=function(t){var e={},n=this.toolbar.getItem(t);return n&&n.data&&(n.data.dataItemId&&(e.dataItems=[{id:n.data.dataItemId,value:n.data.value}]),n.data.alterFunction&&(e.alterFunction=n.data.alterFunction)),e},e.prototype.getToolbarItems=function(){var t=this,e=this.state.get("Selected");return e.length?(1===e.length?this.getToolbarItemsForSingleShape(e[0]):this.getToolbarItemsForMultiShape(e)).pipe(Object(f.a)((function(e){var n=t.state.get("InnerShapeSelection");return Object.keys(n).length>0?e.filter((function(t){return"openShapelinkEditor"!==t.featureId})):e})),Object(d.a)((function(e){var n;return n=e.map((function(e){return t.isFeatureEnabled(e.featureId)})),c.a.apply(void 0,r.k(n)).pipe(Object(f.a)((function(t){return e.filter((function(e,n){return t[n]}))})))}))):Object(l.a)([])},e.prototype.isFeatureEnabled=function(t){var e=this.featureList.getFeature(t);if(e.transformer){var n=this.injector.get(e.transformer);if(n.isEnabled)return n.isEnabled(e.id)}return Object(l.a)(!0)},e.prototype.getToolbarItemsForSingleShape=function(t){return this.locator.getShapeOnce(t).pipe(Object(m.a)((function(t){return null!==t})),Object(f.a)((function(t){return t.getContextualToolbarItems()})))},e.prototype.getToolbarItemsForMultiShape=function(t){return this.locator.getDiagramOnce().pipe(Object(f.a)((function(e){var n=Object(s.filter)(e.shapes,(function(e){return t.includes(e.id)}));if(e.sameType(t)){var o=n.map((function(t){return t.getContextualToolbarItemsForSameType()}));return s.intersectionBy.apply(void 0,r.k(o,["featureId"]))}o=n.map((function(t){return t.getContextualToolbarItemsForMultipleTypes()}));return s.intersectionBy.apply(void 0,r.k(o,["featureId"]))})))},e.prototype.getToolbarItemsForTextEdit=function(t){return Object(p.b)()},e.prototype.getItemDataAndProperties=function(t,e){var n=this.getUIControlProperties(t);if(t.transformer){var r=this.injector.get(t.transformer);return(r.transformProperties?r.transformProperties(t.id,n):Object(l.a)(n)).pipe(Object(d.a)((function(n){return r.getFeatureData(t.id,e).pipe(Object(f.a)((function(t){return{data:t,controlProps:n}})))})))}if(e){var o=i.k.mergeInstances({},t.data,e);return Object(l.a)({data:o,controlProps:n})}return Object(l.a)({data:t.data,controlProps:n})},e.prototype.getUIControlProperties=function(t){return{id:t.id,icon:t.icon,label:t.label,tooltip:t.tooltip}},e.prototype.getUIControlType=function(t,e){if(void 0===e&&(e="primary"),"secondary"===e)return k.a;if(!t||t===a.d.BINARY)return P.a;if(t===a.d.OPTION_IMAGES||t===a.d.OPTION_LIST)return T.a;if(t===a.d.CUSTOM_STYLE_PALETTES)return D.a;throw new Error("A contextual toolbar UI control is not available for "+t)},e.prototype.destroy=function(){this.toolbar&&this.toolbar.hide().subscribe(),this.subs.forEach((function(t){t.unsubscribe()}))},Object.defineProperty(e.prototype,"indicators",{get:function(){return[]},enumerable:!0,configurable:!0}),e.prototype.createAddSource=function(){return Object(p.b)()},e.prototype.createRemoveSource=function(){return Object(p.b)()},e.prototype.createChangeSource=function(){return Object(p.b)()},e=r.d([Object(w.a)(),r.g("design:paramtypes",[o.x,i.p,j.a,i.jb,x.a,I.a,C.a])],e)}(w.b);Object.defineProperty(E,"name",{value:"ContextualToolbarHandler"})},aT6q:function(t,e,n){"use strict";var r=n("LoAr"),o=n("7pFi"),i=n("YEP7"),a=n("pYIu");n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return l}));var s=[[".abs-dropdown-container[_ngcontent-%COMP%]{background-color:transparent;-webkit-appearance:none;-moz-appearance:none;appearance:none;cursor:pointer}.abs-dropdown-items-container[_ngcontent-%COMP%]  .ps-content{padding:10px}.abs-dropdown-items-container[_ngcontent-%COMP%]{width:-webkit-max-content;width:-moz-max-content;width:max-content;max-width:215px;border:1px solid #d8d8d8;border-radius:2px;background-color:#fff;overflow:hidden;box-shadow:0 2px 2px #c3c3de}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item{height:30px;line-height:30px;text-align:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .nu-icon{margin:0 5px 0 -5px;float:left}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item .dropdown-item-select-tick{visibility:hidden}.abs-dropdown-items-container[_ngcontent-%COMP%]  .abs-dropdown-item.selected .dropdown-item-select-tick{visibility:visible}.abs-dropdown-inner-wrapper[_ngcontent-%COMP%]{position:relative}.abs-dropdown-inner[_ngcontent-%COMP%]{position:absolute;z-index:10}.abs-dropdown-inner[_ngcontent-%COMP%]:not(.right){left:0}.abs-dropdown-inner.right[_ngcontent-%COMP%]{right:0}@-webkit-keyframes showingAnimationDown{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationDown{from{opacity:0;transform:translateY(-5px)}to{opacity:1;transform:translateY(0)}}@-webkit-keyframes showingAnimationUp{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}@keyframes showingAnimationUp{from{opacity:0;transform:translateY(5px)}to{opacity:1;transform:translateY(0)}}"]],u=r.Fb({encapsulation:0,styles:s,data:{}});function l(t){return r.dc(2,[r.Zb(402653184,1,{itemsContainer:0}),r.Zb(402653184,2,{ddContainer:0}),r.Zb(402653184,3,{dropDownInnerContainer:0}),(t()(),r.Hb(3,0,[[2,0],["ddContainer",1]],null,8,"div",[["class","abs-dropdown-container"]],null,null,null,null,null)),(t()(),r.Hb(4,0,null,null,1,"div",[["class","abs-dropdown-btn-container"]],null,null,null,null,null)),r.Sb(null,0),(t()(),r.Hb(6,0,null,null,5,"div",[["class","abs-dropdown-inner-wrapper"]],null,null,null,null,null)),(t()(),r.Hb(7,0,[[3,0],["dropDownInnerContainer",1]],null,4,"div",[],[[8,"className",0]],[[null,"wheel"]],(function(t,e,n){var r=!0,o=t.component;"wheel"===e&&(r=!1!==o.preventEdgeScroll(n)&&r);return r}),null,null)),(t()(),r.Hb(8,0,[[1,0],["itemsContainer",1]],null,3,"ul",[["class","abs-dropdown-items-container"]],null,null,null,null,null)),(t()(),r.Hb(9,0,null,null,2,"perfect-scrollbar",[["class","abstract-dropdown-scrollbar"]],[[2,"ps-show-limits",null],[2,"ps-show-active",null]],null,null,o.b,o.a)),r.Gb(10,507904,null,0,i.b,[r.H,r.i,r.K],null,null),r.Sb(0,1)],(function(t,e){t(e,10,0)}),(function(t,e){var n=e.component;t(e,7,0,r.Lb(2,"abs-dropdown-inner ",n.direction," ",n.autoPosition?n.alignment:"","")),t(e,9,0,r.Tb(e,10).autoPropagation,r.Tb(e,10).scrollIndicators)}))}r.Db("abs-dropdown",a.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,3,"abs-dropdown",[],null,null,null,l,u)),r.Gb(1,1228800,null,2,a.a,[r.o],null,null),r.Zb(603979776,1,{dropDownItems:1}),r.Zb(335544320,2,{dropDownButton:0})],null,null)}),{direction:"direction",alignment:"alignment",autoPosition:"autoPosition",maxHeight:"maxHeight",settings:"settings"},{},["[ddbutton]","[dditem]"])},c3EF:function(t,e,n){"use strict";var r=!("undefined"==typeof window||!window.document||!window.document.createElement),o={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};t.exports=o},deqJ:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("D57K"),o=n("h1tj"),i=function(t){function e(e,n){var r=t.call(this)||this;return r._type=n,r.name=e,r}return r.e(e,t),e.prototype.getCursor=function(t){return null},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.convertToCursorDrawable=function(t){var e=this;t.getCursor=function(t){return e.getCursor(t)}},e}(o.Container)},eIBf:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("D57K"),o=n("LiEJ"),i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.labelSource=new o.a(""),e}return r.e(e,t),Object.defineProperty(e.prototype,"label",{get:function(){return this._props?this._props.label:null},enumerable:!0,configurable:!0}),e.prototype.apply=function(){t.prototype.apply.call(this),this._props.label&&this.labelSource.next(this._props.label)},e}(n("IGWl").a)},elRR:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n("D57K"),o=n("SKSx"),i=(n("Wpmq"),n("U3QC")),a=n("IMYO"),s=n("hOK2"),u=n("W/Ou"),l=n("Jg5f"),c=n("lqvn"),p=n("iUUs"),d=n("d9YI"),f=n("gQst"),h=n("5xGT"),g=n("LLEj"),b=n("sXdR"),m=(n("7zx0"),function(t){function e(e,n,r,o,i){var a=t.call(this,e,n)||this;return a.commandService=e,a.vToDcoordinate=n,a.state=r,a.postmsg=o,a.realtimeStates=i,a.pointerThrottle=120,a}return r.e(e,t),e.prototype.initialize=function(e,n,r){var o=this,s=t.prototype.initialize.call(this,e,n,r),u=this.getStageDrag(n).pipe(Object(i.a)((function(t){return o.updatePan(t.nativeEvent.movementX,t.nativeEvent.movementY)}))),l=this.getStageMouseDown(e).pipe(Object(i.a)((function(t){o.hideComments()}))),c=this.getShapeTouch().pipe(Object(i.a)((function(t){o.postmsg.sendToParent("shape:touch",{shapeId:t.currentTarget.name})}))),g=this.interactionCanvas.canvas,m=Object(p.a)(g,"mousemove").pipe(Object(b.lodashThrottle)(this.pointerThrottle,{leading:!0,trailing:!0}),Object(i.a)((function(t){if(h.A.get("DEBUG_PHOTON_POINTER_MOVE")){var e=o.vToDcoordinate.x(t.x),n=o.vToDcoordinate.y(t.y),r=JSON.stringify([e,n]);o.realtimeStates.set("pointer",r)}})),Object(a.a)((function(t){return Object(d.b)()})));return Object(f.a)(s,c,u,l,m)},e.prototype.getStageMouseDown=function(t){return Object(p.a)(t,"stagemousedown")},e.prototype.hideComments=function(){this.state.set("CommentThreadData",{visible:!1})},e.prototype.getCursor=function(){var t=this;return this.pointerMove().pipe(Object(s.a)(100),Object(u.a)({x:this.interactionCanvas.getMouseX(),y:this.interactionCanvas.getMouseY()}),Object(l.a)((function(e){var n=t.getObjectsUnderPoint(e).filter((function(t){return t instanceof o.b}));return t.getCursorByContext(n,[])})),Object(c.a)((function(t,e){return t.cursor===e.cursor&&t.tail===e.tail})))},Object.defineProperty(e.prototype,"defaultCursor",{get:function(){return{cursor:"move",tail:null,type:"css"}},enumerable:!0,configurable:!0}),e.prototype.shapeTouched=function(t){},e}(g.a));Object.defineProperty(m,"name",{value:"ViewerInteractionHandler"})},etrl:function(t,e,n){var r,o,i;o=[],void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){i(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function n(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,i,a){var s=o.URL||o.webkitURL,u=document.createElement("a");i=i||t.name||"download",u.download=i,u.rel="noopener","string"==typeof t?(u.href=t,u.origin===location.origin?r(u):n(u.href)?e(t,i,a):r(u,u.target="_blank")):(u.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(u.href)}),4e4),setTimeout((function(){r(u)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,o,i){if(o=o||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),o);else if(n(t))e(t,o,i);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&s)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var t=l.result;t=u?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},l.readAsDataURL(t)}else{var c=o.URL||o.webkitURL,p=c.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout((function(){c.revokeObjectURL(p)}),4e4)}});o.saveAs=i.saveAs=i,t.exports=i})?r.apply(e,o):r)||(t.exports=i)},flPR:function(t,e,n){"use strict";n.d(e,"a",(function(){return m})),n.d(e,"b",(function(){return y}));var r=n("D57K"),o=n("5xGT"),i=n("iUUs"),a=n("gQst"),s=n("wk5G"),u=n("ZJHl"),l=n("12aA"),c=n("G2Mx"),p=n("Jg5f"),d=n("cGAd"),f=n("hOK2"),h=n("AouM"),g=n("R+ki"),b=n("W/Ou");function m(){return function(t){}}var y=function(){function t(t){this.state=t,this.subs=[]}return t.prototype.add=function(){var t=this.createAddSource().pipe(Object(u.a)());return this.subs.push(t.connect()),t},t.prototype.remove=function(){var t=this.createRemoveSource().pipe(Object(u.a)());return this.subs.push(t.connect()),t},t.prototype.change=function(){var t=this.createChangeSource().pipe(Object(u.a)());return this.subs.push(t.connect()),t},t.prototype.destroy=function(){for(;this.subs.length>0;)this.subs.pop().unsubscribe();this.indicatorLayer=void 0},t.prototype.duringInteractions=function(t,e){return Object(a.a)(this.duringSelectionInteraction(t,e),this.duringPan(t,e),this.duringTextEdit(t,e))},t.prototype.duringSelectionInteraction=function(t,e){return Object(a.a)(Object(i.a)(this.indicatorLayer,s.b.interactionStart).pipe(Object(l.a)(e)),Object(a.a)(Object(i.a)(this.indicatorLayer,s.b.interactionEnd),Object(i.a)(this.indicatorLayer,s.b.interactionCancel)).pipe(Object(l.a)(t)))},t.prototype.duringSelectionInteractionInProgress=function(t,e){return Object(a.a)(Object(i.a)(this.indicatorLayer,s.b.interaction).pipe(Object(c.a)(1),Object(l.a)(e)),Object(a.a)(Object(i.a)(this.indicatorLayer,s.b.interactionEnd),Object(i.a)(this.indicatorLayer,s.b.interactionCancel)).pipe(Object(l.a)(t)))},t.prototype.duringTextEdit=function(t,e){return this.state.changes("EditingText").pipe(Object(p.a)((function(n){return!1===n.open?t:e})))},t.prototype.duringPan=function(t,e){var n=this.state.changes("DiagramPan").pipe(Object(d.a)(1));return n.pipe(Object(f.a)(200),Object(h.a)((function(){return n.pipe(Object(g.a)(100),Object(l.a)(t),Object(b.a)(e))})))},t.prototype.duringPanMouseControlState=function(t,e){return this.state.changes("MouseControlState").pipe(Object(p.a)((function(n){return"pan"===n?e:t})))},t}();!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}r.e(e,t)}(o.jb)},hSRu:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("Jg5f"),o=n("LiEJ"),i=n("d9YI"),a=n("fQLH"),s=(n("NNJu"),function(){function t(){this._data=new o.a(null),this.change=new a.a}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data.value},set:function(t){this._data.next(t)},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this.data=t},t.prototype.setProperties=function(t){this.props=t},t.prototype.ngAfterViewInit=function(){var t=this;this.absDropdown.changed.subscribe((function(e){var n=t.data.value.find((function(t){return t.id===e[0]}));t.change.next(n)}))},t.prototype.select=function(t){},t.prototype.apply=function(){},t.prototype.applyAnimated=function(){return Object(i.b)()},Object.defineProperty(t.prototype,"dropdownType",{get:function(){var t=this.data.value.find((function(t){return t.selected}));return t?t.buttonIcon?"icon":"text":this.props.icon?"icon":"text"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"defaultItems",{get:function(){return this._data.pipe(Object(r.a)((function(t){return t.value.filter((function(t){return!t.custom}))})))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"customItems",{get:function(){return this._data.pipe(Object(r.a)((function(t){return t.value.filter((function(t){return t.custom}))})))},enumerable:!0,configurable:!0}),t}())},ljsB:function(t,e,n){"use strict";var r=n("D57K"),o=n("5xGT"),i=n("S83/"),a=n("h1tj"),s=n("Jg5f"),u=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{x:!0,y:!0,dx:!1,dy:!1,currentX:!1,currentY:!1,animate:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return{DiagramPan:this.data.panStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this.state.get("DiagramPan");this.data.currentX=t.x,this.data.currentY=t.y,this.calculateXY(),!1===this.data.animate?this.data.panStateData=this.extractStateData(this.data):this.data.panStateData=this.simulateAnimation()},e.prototype.calculateXY=function(){void 0!==this.data.dx&&(this.data.x=this.data.currentX+this.data.dx),void 0!==this.data.dy&&(this.data.y=this.data.currentY+this.data.dy)},e.prototype.simulateAnimation=function(){var t=this;return i.a.simulate({x:this.data.currentX,y:this.data.currentY}).to({x:this.data.x,y:this.data.y},300,a.Ease.sineOut).changes().pipe(Object(s.a)((function(e){return t.extractStateData({x:e.x,y:e.y})})))},e.prototype.extractStateData=function(t){var e=t.x,n=t.y;return new a.Point(e,n)},e.prototype.execute=function(){return!0},e=r.d([Object(o.l)(),r.g("design:paramtypes",[o.jb])],e)}(o.a);Object.defineProperty(u,"name",{value:"PanDiagram"});var l=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{level:!0,currentLevel:!1,toX:!1,toY:!1,toCenter:!1,currentPan:!1,delta:!1,animate:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return this.data.panStateData?{DiagramZoomLevel:this.data.zoomStateData,DiagramPan:this.data.panStateData}:{DiagramZoomLevel:this.data.zoomStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.setZoomLevel(),this.setPan();var t=void 0!==this.data.toX&&void 0!==this.data.toY;if(!1===this.data.animate)this.data.zoomStateData=this.data.level,t&&(this.data.panStateData=this.getPan());else{var e=this.simulateAnimation();this.data.zoomStateData=e.pipe(Object(s.a)((function(t){return t.level}))),t&&(this.data.panStateData=e.pipe(Object(s.a)((function(t){return new a.Point(t.x,t.y)}))))}},e.prototype.getPan=function(){var t=this.data.level/this.data.currentLevel,e=(this.data.currentPan.x-this.data.toX)*t+this.data.toX,n=(this.data.currentPan.y-this.data.toY)*t+this.data.toY;return new a.Point(e,n)},e.prototype.setPan=function(){this.data.currentPan=this.state.get("DiagramPan");var t=this.state.get("DiagramViewPort");this.data.toCenter&&(this.data.toX=t.centerX,this.data.toY=t.centerY)},e.prototype.setZoomLevel=function(){this.data.currentLevel=this.state.get("DiagramZoomLevel"),!this.data.level&&this.data.delta>0&&(this.data.level=this.data.currentLevel*this.data.delta)},e.prototype.simulateAnimation=function(){var t=this.getPan();return i.a.simulate({level:this.data.currentLevel,x:this.data.currentPan.x,y:this.data.currentPan.y}).to({level:this.data.level,x:t.x,y:t.y},300,a.Ease.sineOut).changes()},e.prototype.execute=function(){return!0},e=r.d([Object(o.l)(),r.g("design:paramtypes",[o.jb])],e)}(o.a);Object.defineProperty(l,"name",{value:"ZoomDiagram"});var c=n("QoSw"),p=n("w1VY"),d=function(t){function e(e,n,r){var o=t.call(this)||this;return o.state=e,o.ll=n,o.diagramToViewPort=r,o}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{coordinates:!1,shapeIds:!1,groupId:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return{DiagramPan:this.data.panStateData}},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.data.shapeIds&&this.data.shapeIds[0]||this.data.groupId?this.data.panStateData=this.panToShapes(this.data.shapeIds,this.data.groupId):this.data.coordinates&&(this.data.panStateData=this.calculatePan(this.data.coordinates))},Object.defineProperty(e.prototype,"locator",{get:function(){return this.ll.forCurrent(!0)},enumerable:!0,configurable:!0}),e.prototype.panToShapes=function(t,e){var n=this;return this.locator.getDiagramOnce().pipe(Object(s.a)((function(r){var o=t||r.getShapesInGroup(e),i=r.getBounds(o),a={x:i.centerX,y:i.centerY};return n.calculatePan(a)})))},e.prototype.calculatePan=function(t){var e=this.state.get("DiagramViewPort"),n=this.diagramToViewPort.x(t.x),r=this.diagramToViewPort.y(t.y),o=this.state.get("DiagramPan");return{x:o.x-(n-e.centerX),y:o.y-(r-e.centerY)}},e.prototype.execute=function(){return!0},e=r.d([Object(o.l)(),r.g("design:paramtypes",[o.jb,c.a,p.a])],e)}(o.a);Object.defineProperty(d,"name",{value:"FocusToPoint"}),n.d(e,"a",(function(){return f}));var f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.register=function(t){t.map(e.zoomDiagram).add(l),t.map(e.panDiagram).add(u),t.map(e.focusToPoint).add(d),t.mapSequence(e.zoomAndPanDiagram).add(l).add(u,{transform:function(t){return{x:t.data[0].x,y:t.data[0].y}}})},e.zoomDiagram=new e("ZoomDiagram"),e.panDiagram=new e("PanDiagram"),e.zoomAndPanDiagram=new e("ZoomAndPanDiagram"),e.focusToPoint=new e("FocusToPoint"),e.hyperlinkNavigate=new e("HyperlinkNavigate"),e}(o.n)},lu3Q:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("nsO7"),o=function(){function t(){}return t.prototype.addCursors=function(t){this.cursors?this.cursors=Object(r.merge)(this.cursors,t):this.cursors=t},t.prototype.getCursorCSS=function(t){var e,n;if(t.tail){var r=this.getCompactCursor(this.getCursor(t.cursor||"normal"),this.getTail(t.tail));e=r.content,n=r.origin}else{if(!t.cursor||t.tail)throw new Error("At least one of cursor or tail should be defined to generate the cursor CSS.");e=this.getCursor(t.cursor),n=this.getSvgData(e).origin}return("url('data:image/svg+xml;utf8,"+e+"') "+n.x+" "+n.y+", auto").replace(/\n|\r/g,"")},t.prototype.getCursorIcon=function(t){return"url("+this.getCursor(t.cursor)+"), auto"},t.prototype.getCursor=function(t){if(this.cursors.cursors[t])return this.cursors.cursors[t];throw new Error(t+" cursor is not found in the cursors ICursorMap")},t.prototype.getTail=function(t){if(this.cursors.tails[t])return this.cursors.tails[t];throw new Error(t+" cursor tail is not found in the cursors ICursorMap")},t.prototype.getCompactCursor=function(t,e){var n=this.getSvgData(t),r=this.getSvgData(e);return{content:'<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+(n.width+r.width)+'" height="'+(n.height+r.height)+'" ><g>'+n.content+'</g><g transform="translate('+n.width+" "+n.height+')">'+r.content+"</g></svg>",origin:n.origin}},t.prototype.getSvgData=function(t){var e=document.createElement("div");e.innerHTML=t;var n=e.querySelector("svg");return{content:n.innerHTML,width:Number(n.getAttribute("width")),height:Number(n.getAttribute("height")),origin:{x:Number(n.getAttribute("data-ox")||0),y:Number(n.getAttribute("data-oy")||0)}}},t}()},myrl:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("TQyE"),o=n("fQLH"),i=n("LiEJ"),a=n("d9YI"),s=n("nsO7"),u=function(){function t(t,e){this.resolver=t,this.injector=e,this.currentColorPickerComponents={},this.currentDataItemIds=[],this.componentRefreshRequired=!1,this.colorPickerSubscriptions=[],this._change=new o.a,this.valueSource=new i.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){var e=t.map((function(t){return t.id}));this.currentDataItemIds.length>0?Object(s.isEqual)(this.currentDataItemIds.sort(),e.sort())?this.componentRefreshRequired=!1:(this.componentRefreshRequired=!0,this.currentDataItemIds=e):(this.currentDataItemIds=e,this.componentRefreshRequired=!0),this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){var t=this;this.componentRefreshRequired?(this.currentColorPickerComponents={},this.colorPickerSubscriptions.forEach((function(t){t.unsubscribe()})),this.colorPickerSubscriptions=[],this.singleColorPickerSection.clear(),this._data.forEach((function(e){var n=t.getColorPicker(e);n.instance.apply(),n.changeDetectorRef.markForCheck();var r=n.instance.change.subscribe((function(n){t._change.next({item:e,change:n})}));t.colorPickerSubscriptions.push(r)}))):this._data.forEach((function(e){t.getColorPicker(e).instance.apply()}))},t.prototype.applyAnimated=function(){return this.apply(),Object(a.b)()},t.prototype.createColorPicker=function(t){var e=this.resolver.resolveComponentFactory(r.a);return this.singleColorPickerSection.createComponent(e)},t.prototype.getColorPicker=function(t){this.currentColorPickerComponents[t.id]||(this.currentColorPickerComponents[t.id]=this.createColorPicker(t.id));var e=this.currentColorPickerComponents[t.id];e.instance.setProperties({label:t.label});var n={value:t.style.fillColor?t.style.fillColor:t.style.lineColor,params:void 0};return t.id.includes("diff")&&(n.params={isDiffColor:!0}),e.instance.setData(n),e},t}()},o9on:function(t,e,n){"use strict";var r=n("D57K"),o=n("5xGT"),i=n("4y1S"),a=n("d9YI"),s=function(t){function e(e){var n=t.call(this)||this;return n.auth=e,n}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.data.auth=this.auth.token},e.prototype.execute=function(){return a.a},e.prototype.executeResult=function(t){return this.data.callBack(t.result),!0},Object.defineProperty(e,"resultType",{get:function(){return{result:Object}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return o.h.get("REST_API_BASE_URL")+"/"+o.h.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/get-projects"},enumerable:!0,configurable:!0}),e=r.d([Object(o.l)(),r.g("design:paramtypes",[i.c])],e)}(o.d);Object.defineProperty(s,"name",{value:"GetClassicProjects"});var u=function(t){function e(e){var n=t.call(this)||this;return n.auth=e,n}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["INeutrinoRestCommand"]},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.data.auth=this.auth.token},e.prototype.execute=function(){return a.a},Object.defineProperty(e,"resultType",{get:function(){return{result:Object}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return o.h.get("REST_API_BASE_URL")+"/"+o.h.get("MESSAGE_PROTOCOL_VERSION")+"/1/user/migrate-classic-projects"},enumerable:!0,configurable:!0}),e=r.d([Object(o.l)(),r.g("design:paramtypes",[i.c])],e)}(o.d);Object.defineProperty(u,"name",{value:"ImportClassicProjects"}),n.d(e,"a",(function(){return l}));var l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.registerGetClassicProjects=function(t){t.map(e.getClassicProjects).add(s)},e.registerImportClassicProjects=function(t){t.map(e.importClassicProjects).add(u)},e.getClassicProjects=new e("GetClassicProjects"),e.importClassicProjects=new e("ImportClassicProjects"),e}(o.n)},"pt/I":function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));var r=n("D57K"),o=n("gQst"),i=n("iUUs"),a=n("U3QC"),s=n("4HYP"),u=n("AouM"),l=n("mhnT"),c=n("z5yO"),p=n("LLEj"),d=n("O6K7"),f=n("5xGT"),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),Object.defineProperty(e.prototype,"defaultCursor",{get:function(){return{cursor:"comment",tail:null,type:"cur",viewingArea:"app"}},enumerable:!0,configurable:!0}),e.prototype.initialize=function(e,n,r){var i=this,s=t.prototype.initialize.call(this,e,n,r),u=this.getStagePressUp(this.gridCanvas).pipe(Object(a.a)((function(t){return i.addComment(t)}))),l=this.getClickOnShape().pipe(Object(a.a)((function(t){return i.addComment(t)})));return Object(o.a)(s,u,l)},e.prototype.getClickOnShape=function(){var t=this;return this.getShapes().pipe(Object(s.a)((function(e){return Object(i.a)(e,"mousedown").pipe(Object(u.a)((function(){return Object(i.a)(e,"pressup").pipe(Object(l.a)(Object(i.a)(e,"pressmove")))})),Object(l.a)(Object(i.a)(t.diagramCanvas,"childRemoved").pipe(Object(c.a)((function(t){return t.child===e})))))})))},e.prototype.addComment=function(t){f.lb.track("canvas.comment.add.canvas.click");var e=new d.a(d.b.CreateComment,t);this.interactionCanvas.dispatchEvent(e)},e}(p.a)},qMyy:function(t,e,n){"use strict";var r=n("D57K"),o=n("Jzy8"),i=n("5xGT"),a=n("xnGY"),s=n("hX56"),u=n("G2Mx"),l=n("z5yO"),c=n("AouM"),p=n("oyCe"),d=function(t){function e(e,n){var r=t.call(this)||this;return r.modelSubManager=e,r.dataStore=n,r}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){var t=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(u.a)(1),Object(l.a)((function(t){return t&&t.project&&"home"!==t.project})),Object(c.a)((function(e){return t.modelSubManager.start(o.p,e.project)})))},e=r.d([Object(i.l)(),r.g("design:paramtypes",[a.d,s.b])],e)}(i.a);Object.defineProperty(d,"name",{value:"StartDiagramProjectSubscription"});var f=n("ktZS"),h=n("981U"),g=n("U3QC"),b=function(t){function e(e,n){var r=t.call(this,n)||this;return r.modelSubManager=e,r.router=n,r}return r.e(e,t),e.prototype.execute=function(){var t=this;return this.resultData=this.data,this.modelSubManager.start(f.a,this.data.status.input.resourceId).pipe(Object(c.a)((function(t){return t.status})),Object(l.a)((function(t){return t.subStatus!==a.e.created})),Object(u.a)(1),Object(g.a)((function(e){t.navigateToRoute(t.data.status),e.subStatus===a.e.errored&&t.log.error("There was an error starting the diagram subscription : "+e.error)})))},e=r.d([Object(i.l)(),r.g("design:paramtypes",[a.d,h.m])],e)}(i.e);Object.defineProperty(b,"name",{value:"StartDiagramSubscription"});var m=n("yn08"),y=n("C5+t"),v=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{status:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return i.h.get("DISABLE_WEBSOCKET_CONNECTION")?["IStateChangeCommand"]:["IStateChangeCommand","IMessageCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return this.data},enumerable:!0,configurable:!0}),e.prototype.execute=function(){var t=this,e=this.data.status.input.action;return this.data={Realtime:{action:""}},e===m.a.Edit&&(this.data.Realtime.action="ACTIVITIES.EDITING"),e===m.a.View&&(this.data.Realtime.action="ACTIVITIES.VIEWING"),this.state.getShared().forEach((function(e){return t.data[e]=t.state.get(e)})),!0},e=r.d([Object(i.l)(),r.g("design:paramtypes",[i.jb])],e)}(y.b);Object.defineProperty(v,"name",{value:"BeginStateSync"});var O=n("d62g"),S=n("gQst"),C=n("8Fqk"),x=n("d9YI"),w=n("4y1S"),j=function(t){function e(e,n){var r=t.call(this)||this;return r.dataStore=e,r.modelSubManager=n,r}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){this.data.collabs.forEach((function(t){t.addedStatus="pending",t.email=t.email.toLowerCase()}))},e.prototype.execute=function(){return this.dataStore.getModelStore(o.h).storageMergeCollabs(this.data.diagramId,this.data.collabs)},e.prototype.executeResult=function(t){var e=this,n=this.dataStore.getModelStore(o.h),i=[],s=t.collabs;return s.forEach((function(t,n){t&&(i.push(e.modelSubManager.start(w.p,t.id).pipe(Object(c.a)((function(t){return t.status})),Object(l.a)((function(t){return t.subStatus!==a.e.created})),Object(u.a)(1))),e.data&&(s[n].email=e.data.collabs[n].email))})),s.length>0?Object(O.a)(S.a.apply(void 0,r.k(i)),Object(C.a)((function(){return n.storageMergeCollabs(e.resourceId,s.filter((function(t){return null!==t})))})),Object(C.a)((function(){return e.removePendingCollabs()}))):Object(x.b)()},e.prototype.removePendingCollabs=function(){return this.dataStore.getModelStore(o.h).storageFilterCollabs(this.resourceId,(function(t){return"pending"===t.addedStatus}))},e.prototype.revert=function(){return this.removePendingCollabs()},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b,a.d])],e)}(y.b);Object.defineProperty(j,"name",{value:"AddDiagramCollaborators"});var I=n("pN2L"),P=n("Jg5f"),T=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{collabs:!0,diagramId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.previousData={},this.dataStore.getModelStore(o.h).getCollabs(this.data.diagramId).pipe(Object(g.a)((function(e){t.previousData.collabs=e.filter((function(e){return-1!==t.data.collabs.map((function(t){return t.id})).indexOf(e.id)}))})))},e.prototype.execute=function(){var t=this,e=this.dataStore.getModelStore(o.h);return Object(I.a)(this.previousData.collabs).pipe(Object(P.a)((function(e){var n=[];return t.data.collabs.forEach((function(t){var r=e.filter((function(e){return e.id===t.id}))[0];r.role=t.role,n.push(r)})),n})),Object(c.a)((function(n){return e.storageMergeCollabs(t.data.diagramId,n)})))},e.prototype.executeResult=function(t){return this.dataStore.getModelStore(o.h).storageMergeCollabs(this.resourceId,t.collabs)},e.prototype.revert=function(){return this.dataStore.getModelStore(o.h).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(T,"name",{value:"ChangeDiagramCollaborators"});var D=function(t){function e(e,n){var r=t.call(this)||this;return r.dataStore=e,r.modelSubManager=n,r}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{diagramId:!0,collabIds:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.previousData={},this.dataStore.getModelStore(o.h).getCollabs(this.data.diagramId).pipe(Object(g.a)((function(e){t.previousData.collabs=e.filter((function(e){return-1!==t.data.collabIds.indexOf(e.id)}))})))},e.prototype.execute=function(){var t=this;return this.dataStore.getModelStore(o.h).storageFilterCollabs(this.data.diagramId,(function(e){return t.data.collabIds.indexOf(e.id)>-1}))},e.prototype.executeResult=function(t){var e=this.dataStore.getModelStore(o.h),n=[];this.previousData&&(n=this.previousData.collabs.filter((function(e){return-1===t.collabIds.indexOf(e.id)})));var r=Object(x.b)();n.length>0&&(r=e.storageMergeCollabs(this.data.diagramId,n));var i=e.storageFilterCollabs(this.resourceId,(function(e){return t.collabIds.indexOf(e.id)>-1})),a=this.stopSubscriptions(t.collabIds);return Object(S.a)(r,i,a)},e.prototype.stopSubscriptions=function(t){var e=this;return Object(I.a)(t).pipe(Object(c.a)((function(t){var n=[];return t.forEach((function(t){t&&n.push(e.modelSubManager.stop(t))})),S.a.apply(void 0,r.k(n))})))},e.prototype.revert=function(){return this.dataStore.getModelStore(o.h).storageMergeCollabs(this.data.diagramId,this.previousData.collabs)},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b,a.d])],e)}(y.b);Object.defineProperty(D,"name",{value:"RemoveDiagramCollaborators"});var k=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{diagramId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return!0},e.prototype.executeResult=function(t){return this.dataStore.getModelStore(o.h).replaceOwner(this.resourceId,t.owner)},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(k,"name",{value:"TransferDiagramOwnership"});var E=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{privacy:!0,diagramId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.previousData={},this.dataStore.getModelStore(o.h).getPrivacy(this.data.diagramId).pipe(Object(g.a)((function(e){return t.previousData.privacy=e})))},e.prototype.execute=function(){var t=this,e=this.dataStore.getModelStore(o.h);return Object(I.a)(this.previousData.privacy).pipe(Object(P.a)((function(e){return e.role=t.data.privacy.role,e.level=t.data.privacy.level,e})),Object(c.a)((function(n){return e.storgaeUpdatePrivacy(t.data.diagramId,n)})))},e.prototype.executeResult=function(t){return this.dataStore.getModelStore(o.h).storgaeUpdatePrivacy(this.resourceId,t.privacy)},e.prototype.revert=function(){return this.dataStore.getModelStore(o.h).storgaeUpdatePrivacy(this.data.diagramId,this.previousData.privacy)},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(E,"name",{value:"ChangeDiagramPrivacy"});var A=function(t){function e(e,n){var r=t.call(this)||this;return r.modelSubManager=e,r.dataStore=n,r}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){var t=this;return this.dataStore.findOneRaw(p.a,{id:this.resourceId}).pipe(Object(u.a)(1),Object(l.a)((function(t){return!!(t&&t.collabs&&t.collabs.length>0)})),Object(c.a)((function(e){return S.a.apply(void 0,r.k(e.collabs.map((function(e){return t.modelSubManager.start(w.p,e.id)}))))})))},e=r.d([Object(i.l)(),r.g("design:paramtypes",[a.d,s.b])],e)}(i.a);Object.defineProperty(A,"name",{value:"StartDiagramCollabSubscriptions"});var M=n("zZcu"),_=n("QoSw"),L=n("NNJu"),G=n("iJR/"),F=n("etrl"),R=n.n(F),N=n("19Zn"),B=function(t){function e(e,n,r,o){var i=t.call(this)||this;return i.ll=e,i.resources=n,i.notifierController=r,i.translate=o,i.maxClientExportWidthOrHeight=6e3,i.startExportNotificationId="IMAGE_EXPORT_STARTED",i.maxServerExportWidth=32e3,i}return r.e(e,t),e.prototype.prepareSvgData=function(){var t=this.ll.forCurrentObserver(this.eventData.scenario===i.o.PREVIEW),e=this.createDiagramSVGView(t);return t.pipe(Object(u.a)(1),Object(c.a)((function(t){return t.getDiagramOnce()})),Object(c.a)((function(t){return Object(O.a)(Object(C.a)((function(){return e.populateDiagram()})),Object(C.a)((function(){return e.toSvg().pipe(Object(u.a)(1),Object(P.a)((function(e){return{svg:e,name:t.name}})))})))})))},e.prototype.createDiagramSVGView=function(t){return new N.l(t,this.resources)},e.prototype.execute=function(){return this.triggerDownload()},e.prototype.triggerDownload=function(){if("file"===this.data.format){var t=new Blob([this.data.content],{type:this.data.type});return R()(t,this.data.name),Object(I.a)(!0)}if("blob"===this.data.format)return R()(this.data.content,this.data.name),Object(I.a)(!0)},e.prototype.showExportNotification=function(){var t={inputs:{heading:""+this.translate.instant("NOTIFICATIONS.IMAGE_EXPORT.START.HEADING"),description:""+this.translate.instant("NOTIFICATIONS.IMAGE_EXPORT.START.BODY"),type:L.b.Info,autoDismiss:!1,icon:"image"}};this.notifierController.show(this.startExportNotificationId,L.a,t)},e.prototype.showErrorNotification=function(){var t={inputs:{heading:""+this.translate.instant("NOTIFICATIONS.IMAGE_EXPORT.ERROR.HEADING"),description:""+this.translate.instant("NOTIFICATIONS.IMAGE_EXPORT.ERROR.BODY"),type:L.b.Error,autoDismiss:!0,dismissAfter:3e3}};this.notifierController.show("IMAGE_EXPORT_FAILED",L.a,t)},e.prototype.hideExportNotification=function(){this.notifierController.hide(this.startExportNotificationId)},e.prototype.fetchDiagramFromServer=function(t,e){var n=Math.min(this.maxServerExportWidth,Math.round(e));return this.prepareSvgData().pipe(Object(c.a)((function(e){return Object(G.a)(fetch(i.h.get("SVG_TO_RASTER_URL"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({type:t,width:n,svg:e.svg})}))})),Object(c.a)((function(t){return Object(G.a)(t.blob())})))},e=r.d([Object(i.l)(),r.g("design:paramtypes",[_.a,i.E,i.Q,M.k])],e)}(i.a);Object.defineProperty(B,"name",{value:"AbstractDiagramExportCommand"});var z=function(t){function e(e,n,r,o,i){var a=t.call(this,e,r,o,i)||this;return a.state=n,a}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===i.o.PREVIEW).getDiagramOnce().pipe(Object(c.a)((function(t){var n=e.state.get("DiagramCanvas"),r=t.getBounds(),o=r.width+40,i=r.height+40;if(o>e.maxClientExportWidthOrHeight||i>e.maxClientExportWidthOrHeight)return e.showExportNotification(),e.fetchDiagramFromServer("png",2*o).pipe(Object(P.a)((function(e){return{name:t.name,blob:e}})));n.cache(r.x-20,r.y-20,o,i,2);var a=n.getCacheDataURL();return n.uncache(),Object(I.a)({name:t.name,blob:a})})),Object(g.a)((function(t){e.data={content:t.blob,name:t.name+".png",type:"image/png",format:"blob"}})),Object(c.a)((function(){return t.prototype.execute.call(e)}))).subscribe({complete:function(){return e.hideExportNotification()},error:function(){e.hideExportNotification(),e.showErrorNotification()}}),Object(I.a)({})},e=r.d([Object(i.l)(),r.g("design:paramtypes",[_.a,i.jb,i.E,i.Q,M.k])],e)}(B);Object.defineProperty(z,"name",{value:"ExportAsPng"});var Y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.prepareSvgData().pipe(Object(g.a)((function(e){return t.data={content:e.svg,name:e.name+".svg",type:"image/svg+xml",format:"file"}})))},e=r.d([Object(i.l)()],e)}(B);Object.defineProperty(Y,"name",{value:"ExportAsSvg"});var U=n("P1E4"),H=function(t){function e(e,n,r,o){var i=t.call(this,n,r)||this;return i.state=e,i.dataStore=n,i.modelSubManager=r,i.router=o,i}return r.e(e,t),e.prototype.executeResult=function(e){var n=this;return t.prototype.executeResult.call(this,e).pipe(Object(g.a)((function(){n.resourceId===n.state.get("CurrentDiagram")&&n.router.navigateByUrl("/")})))},e=r.d([Object(i.l)(),r.g("design:paramtypes",[i.jb,s.b,a.d,h.m])],e)}(o.a);Object.defineProperty(H,"name",{value:"DeleteDiagram"});var W=n("d9KY"),X=function(t){function e(e,n,r,o,i){var a=t.call(this,e,r,o,i)||this;return a.state=n,a}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){var e=this;return this.ll.forCurrent(this.eventData.scenario===i.o.PREVIEW).getDiagramOnce().pipe(Object(c.a)((function(t){var n=e.state.get("DiagramCanvas"),r=t.getBounds(),o=r.width+40,i=r.height+40;if(o>e.maxClientExportWidthOrHeight||i>e.maxClientExportWidthOrHeight)return e.showExportNotification(),e.fetchDiagramFromServer("jpg",2*o).pipe(Object(P.a)((function(e){return{name:t.name,blob:e}})));n.cache(r.x-20,r.y-20,o,i,2);var a=n.cacheCanvas,s=a.cloneNode(!0),u=s.getContext("2d");u.fillStyle="#FFF",u.fillRect(0,0,s.width,s.height),u.drawImage(a,0,0);var l=s.toDataURL("image/jpg",1);return n.uncache(),Object(I.a)({name:t.name,blob:l})})),Object(g.a)((function(t){e.data={content:t.blob,name:t.name+".jpg",type:"image/jpg",format:"blob"}})),Object(c.a)((function(){return t.prototype.execute.call(e)}))).subscribe({complete:function(){return e.hideExportNotification()},error:function(){e.hideExportNotification(),e.showErrorNotification()}}),Object(I.a)({})},e=r.d([Object(i.l)(),r.g("design:paramtypes",[_.a,i.jb,i.E,i.Q,M.k])],e)}(B);Object.defineProperty(X,"name",{value:"ExportAsJpeg"});var K=n("fqe/"),q=n("LKRB"),V=function(t){function e(e){var n=t.call(this)||this;return n.auth=e,n}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return Object(x.b)()},e.prototype.prepareData=function(){var t='{\n            document(id:"'+this.data.resourceId+'"){\n            image{\n              svg\n            }\n        }}';this.data.query=t},Object.defineProperty(e.prototype,"httpHeaders",{get:function(){return new q.d({"creately-gravity-token":this.auth.token})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.h.get("GRAPHQL_API_BASE_URL")},enumerable:!0,configurable:!0}),e=r.d([Object(i.l)(),r.g("design:paramtypes",[K.a])],e)}(i.d);Object.defineProperty(V,"name",{value:"FetchEmbedImageUrl"});var Q=n("g3Dv"),J=n("Wpmq"),Z=n("3+4Q"),$=n("3riI"),tt=function(t){function e(e,n,r,o,i,a,s){var u=t.call(this)||this;return u.userLocator=e,u.notifierController=n,u.translate=r,u.ll=o,u.v2d=i,u.dataStore=a,u.state=s,u}var n;return r.e(e,t),n=e,Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),e.handleNotificationClick=function(t,e,n){if(t.parentId)n.findOneLatest(Z.a,{id:t.parentId}).pipe(Object(g.a)((function(t){var n={visible:!0,threadId:t.id,comments:[t]};e.set("CommentThreadData",n)}))).subscribe();else{var r={visible:!0,threadId:t.id,comments:[t]};e.set("CommentThreadData",r)}},Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.data.comment.diagramId=this.resourceId,this.data.comment.userId=this.state.get("CurrentUser"),this.data.comment.added=Date.now(),this.data.comment.parentId?(delete this.data.comment.shapeId,delete this.data.comment.locOnDiagram,Object(x.b)()):this.data.comment.shapeId?this.ll.forCurrent(!1).getShapeOnce(this.data.comment.shapeId).pipe(Object(g.a)((function(e){if(e.type!==Q.o.Connector){var n=e.getPositionOnShape(t.data.comment.locOnDiagram,5);t.data.comment.locOnShape=n}else delete t.data.comment.shapeId}))):Object(x.b)()},e.prototype.execute=function(){var t=this;return Object(O.a)(this.dataStore.insert(Z.a,this.data.comment),Object(C.a)((function(){return t.dataStore.findOne(Z.a,t.data.comment).pipe(Object(u.a)(1),Object(g.a)((function(e){if(!e.parentId){var n={visible:!0,threadId:e.id,comments:[e]};t.state.set("CommentThreadData",n)}})))})))},e.prototype.executeResult=function(){var t=r.a({},this.resultData.comment,{diagramId:this.resourceId,comitted:!0});return Object($.b)(this.handleNotification(),this.dataStore.insert(Z.a,t))},e.prototype.revert=function(){return this.dataStore.remove(Z.a,{id:this.data.comment.id,diagramId:this.resourceId})},e.prototype.handleNotification=function(){var t=this;return this.state.get("CurrentUser")!==this.resultData.comment.userId&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.userId).pipe(Object(u.a)(1),Object(g.a)((function(e){var r=t.resultData.comment.parentId?"REPLIED":"ADDED",o={inputs:{heading:e.firstName+" "+t.translate.instant("NOTIFICATIONS.COMMENT."+r),description:""+t.resultData.comment.comment,user:e,type:L.b.Info,notificationAction:{action:n.handleNotificationClick,args:[t.resultData.comment,t.state,t.dataStore]},autoDismiss:!0,dismissAfter:3e3}};t.notifierController.show("COMMENT_ADDED",L.a,o)}))):Object(I.a)({})},e=n=r.d([Object(i.l)(),r.g("design:paramtypes",[w.q,i.Q,M.k,_.a,J.a,s.b,i.jb])],e)}(y.b);Object.defineProperty(tt,"name",{value:"AddComment"});var et=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.previousData={},this.dataStore.findOne(Z.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(u.a)(1),Object(g.a)((function(e){return t.previousData.comment=e.comment})))},e.prototype.execute=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{deleted:(new Date).getTime(),comitted:!1},$unset:{comment:""}})},e.prototype.executeResult=function(t){return this.dataStore.update(Z.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{deleted:t.comment.deleted,comitted:!0},$unset:{comment:""}})},e.prototype.revert=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{deleted:""}})},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(et,"name",{value:"DeleteComment"});var nt=n("zd2y"),rt=function(t){function e(e,n){var r=t.call(this)||this;return r.resourceId=e,r.datastore=n,r}return r.e(e,t),Object.defineProperty(e.prototype,"subscription",{get:function(){return"Comment"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modelType",{get:function(){return Z.a},enumerable:!0,configurable:!0}),e.prototype.getLatestSyncedTime=function(){var t={id:this.resourceId};return this.datastore.findOneLatest(Z.a,t,{sort:{lastUpdated:-1}}).pipe(Object(P.a)((function(t){return t?t.lastUpdated:null})))},e}(a.b),ot=function(t){function e(e,n){var r=t.call(this)||this;return r.commentSub=e,r.datastore=n,r}return r.e(e,t),e.prototype.execute=function(){var t=new rt(this.resourceId,this.datastore);return this.commentSub.start(t),!0},e=r.d([Object(i.l)(),r.g("design:paramtypes",[nt.a,s.b])],e)}(i.a);Object.defineProperty(ot,"name",{value:"StartDiagramCommentSubscription"});var it=function(t){function e(e,n,r,o,i){var a=t.call(this)||this;return a.userLocator=e,a.notifierController=n,a.translate=r,a.state=o,a.dataStore=i,a}var n;return r.e(e,t),n=e,e.handleNotificationClick=function(t,e,n){if(t.parentId)n.findOneLatest(Z.a,{id:t.parentId}).pipe(Object(g.a)((function(t){var n={visible:!0,threadId:t.id,comments:[t]};e.set("CommentThreadData",n)}))).subscribe();else{var r={visible:!0,threadId:t.id,comments:[t]};e.set("CommentThreadData",r)}},Object.defineProperty(e,"dataDefinition",{get:function(){return{commentId:!0,userId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{resolved:(new Date).getTime(),resolvedBy:this.data.userId,comitted:!1}})},e.prototype.executeResult=function(t){return Object($.b)(this.handleNotification(),this.dataStore.update(Z.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{resolved:this.resultData.comment.resolved,resolvedBy:this.resultData.comment.resolvedBy,comitted:!0}}))},e.prototype.handleNotification=function(){var t=this;return this.state.get("CurrentUser")!==this.resultData.comment.resolvedBy&&this.state.get("CurrentDiagram")===this.resultData.comment.diagramId?this.userLocator.getUserInfo(this.resultData.comment.resolvedBy).pipe(Object(u.a)(1),Object(g.a)((function(e){var r={inputs:{heading:""+e.firstName,description:""+t.translate.instant("NOTIFICATIONS.COMMENT.RESOLVED"),user:e,type:L.b.Info,notificationAction:{action:n.handleNotificationClick,args:[t.resultData.comment,t.state,t.dataStore]},autoDismiss:!0,dismissAfter:3e3}};t.notifierController.show("COMMENT_RESOLVED",L.a,r)}))):Object(I.a)({})},e.prototype.revert=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$unset:{resolved:"",resolvedBy:""}})},e=n=r.d([Object(i.l)(),r.g("design:paramtypes",[w.q,i.Q,M.k,i.jb,s.b])],e)}(y.b);Object.defineProperty(it,"name",{value:"ResolveComment"});var at=function(t){function e(e,n){var r=t.call(this)||this;return r.ll=e,r.resources=n,r}return r.e(e,t),e.prototype.prepareData=function(){var t=this;this.data={};var e=this.ll.forCurrent(this.eventData.scenario===i.o.PREVIEW),n=this.createDiagramSVGView(e);return e.getDiagramOnce().pipe(Object(c.a)((function(e){return Object(O.a)(Object(C.a)((function(){return n.populateDiagram()})),Object(C.a)((function(){return n.toSvg().pipe(Object(u.a)(1),Object(g.a)((function(e){t.data.data=e})))})))})))},e.prototype.createDiagramSVGView=function(t){return new N.l(Object(I.a)(t),this.resources)},Object.defineProperty(e,"implements",{get:function(){return["IHttpCommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return Object(x.b)()},Object.defineProperty(e,"resultType",{get:function(){return{result:Object}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.h.get("PDF_EXPORT_URL")},enumerable:!0,configurable:!0}),e=r.d([Object(i.l)(),r.g("design:paramtypes",[_.a,i.E])],e)}(i.d);Object.defineProperty(at,"name",{value:"GeneratePdf"});var st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["ICommand"]},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.ll.forCurrent(this.eventData.scenario===i.o.PREVIEW).getDiagramOnce().pipe(Object(g.a)((function(e){t.data={content:t.data.data,name:e.name+".pdf",type:"application/pdf",format:"blob"}})))},e=r.d([Object(i.l)()],e)}(B);Object.defineProperty(st,"name",{value:"ExportAsPdf"});var ut=function(t){function e(e){var n=t.call(this)||this;return n.state=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{state:!1,keyboardEvent:!1}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IStateChangeCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"states",{get:function(){return{MouseControlState:this.data.state}},enumerable:!0,configurable:!0}),e.prototype.execute=function(){if(!this.data)return!1;if(this.data.keyboardEvent&&"keydown"===this.data.keyboardEvent.type){var t=this.state.get("CommentThreadData");this.data.keyboardEvent.keyCode===Q.f.C&&t&&!t.visible?(this.data={state:m.b.Comment},i.lb.track("right.comment.add.click",{value1Type:"trigger",value1:"c"})):this.data.keyboardEvent.keyCode===Q.f.Space&&(this.data={state:m.b.Pan})}else this.data.keyboardEvent&&"keyup"===this.data.keyboardEvent.type&&(this.data={state:m.b.Normal});return!!this.data.state},e=r.d([Object(i.l)(),r.g("design:paramtypes",[i.jb])],e)}(i.a);Object.defineProperty(ut,"name",{value:"ChangeMouseControlState"});var lt=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{commentIds:!0,userId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return this.dataStore.update(Z.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{seenBy:[this.data.userId],comitted:!1}})},e.prototype.executeResult=function(){return this.dataStore.update(Z.a,{id:{$in:this.data.commentIds},diagramId:this.resourceId},{$set:{comitted:!0}})},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(lt,"name",{value:"MarkCommentSeen"});var ct=function(t){function e(e){var n=t.call(this)||this;return n.dataStore=e,n}return r.e(e,t),Object.defineProperty(e,"dataDefinition",{get:function(){return{commentId:!0}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"implements",{get:function(){return["IMessageCommand","IDiagramCommand","ICollabCommand"]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.prepareData=function(){var t=this;return this.previousData={},this.dataStore.findOne(Z.a,{id:this.data.commentId,diagramId:this.resourceId}).pipe(Object(u.a)(1),Object(g.a)((function(e){return t.previousData.comment=e.comment})))},e.prototype.execute=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.data.comment,edited:(new Date).getTime(),comitted:!1}})},e.prototype.executeResult=function(t){return this.dataStore.update(Z.a,{id:this.resultData.comment.id,diagramId:this.resourceId},{$set:{comment:t.comment.comment,edited:t.comment.edited,comitted:!0}})},e.prototype.revert=function(){return this.dataStore.update(Z.a,{id:this.data.commentId,diagramId:this.resourceId},{$set:{comment:this.previousData.comment},$unset:{edited:""}})},e=r.d([Object(i.l)(),r.g("design:paramtypes",[s.b])],e)}(y.b);Object.defineProperty(ct,"name",{value:"EditComment"});var pt=function(t){function e(e){var n=t.call(this)||this;return n.auth=e,n}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){return Object(x.b)()},e.prototype.prepareData=function(){var t='mutation{\n            documentResetEmbed(id:"'+this.data.resourceId+'")\n        }';this.data.query=t},Object.defineProperty(e.prototype,"httpHeaders",{get:function(){return new q.d({"creately-gravity-token":this.auth.token})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.h.get("GRAPHQL_API_BASE_URL")},enumerable:!0,configurable:!0}),e=r.d([Object(i.l)(),r.g("design:paramtypes",[K.a])],e)}(i.d);Object.defineProperty(pt,"name",{value:"ResetEmbedImageToken"});var dt=function(t){function e(e,n){var r=t.call(this)||this;return r.auth=e,r.state=n,r}return r.e(e,t),Object.defineProperty(e,"implements",{get:function(){return["IGraphqlRestCommand"]},enumerable:!0,configurable:!0}),e.prototype.execute=function(){if(this.state.get("CurrentUser"))return Object(x.b)()},e.prototype.prepareData=function(){this.data={};this.data.query="{\n            user{\n              organization{\n                subscription{\n                    cancelScheduled,\n                    cancelled,\n                    extendSubOfferStart,\n                    extendSubOfferExpired,\n                    extendSubOfferClaim,\n                    paymentFailedCount,\n                }\n              }\n            }\n        }"},Object.defineProperty(e.prototype,"httpHeaders",{get:function(){return new q.d({"creately-gravity-token":this.auth.token})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"httpUrl",{get:function(){return i.h.get("GRAPHQL_API_BASE_URL")},enumerable:!0,configurable:!0}),e=r.d([Object(i.l)(),r.g("design:paramtypes",[K.a,i.jb])],e)}(i.d);Object.defineProperty(dt,"name",{value:"FetchUserSubscriptionData"});var ft=n("icO7");n.d(e,"a",(function(){return ht}));var ht=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e.register=function(t){t.mapSequence(e.startDiagramSubscription).add(b),t.mapSequence(e.startDiagramSubscriptionAndDeps).add(b).add(v,{alter:function(t){return!0}}).add(A).add(ot).add(d),t.mapSequence(e.addDiagramCollaborators).add(j),t.map(e.removeDiagramCollaborators).add(D),t.map(e.changeDiagramCollaborators).add(T),t.map(e.transferDiagramOwnership).add(k),t.mapSequence(e.changeDiagramPrivacy).add(E),t.mapSequence(e.exportAsPng).add(z),t.mapSequence(e.exportAsJpeg).add(X),t.mapSequence(e.fetchUserSubscriptionData).add(dt),t.mapSequence(e.fetchEmbedImageUrl).add(V),t.mapSequence(e.resetEmbedImageToken).add(pt),t.mapSequence(e.exportAsSvg).add(Y),t.mapSequence(e.exportAsPdf).add(at).add(st),t.map(e.deleteDiagram).add(H),t.map(e.selectShapes).add(W.a),t.map(e.addComment).add(tt),t.map(e.editComment).add(ct),t.map(e.deleteComment).add(et),t.map(e.resolveComment).add(it),t.map(e.markCommentSeen).add(lt),t.map(e.changeMouseControlState).add(ut),t.map(e.documentChange).add(ft.a)},e.startDiagramSubscription=new e("StartDiagramSubscription"),e.startDiagramSubscriptionAndDeps=new e("StartDiagramSubscriptionAndDeps"),e.addDiagramCollaborators=new e("AddDiagramCollaborators"),e.changeDiagramCollaborators=new e("ChangeDiagramCollaborators"),e.removeDiagramCollaborators=new e("RemoveDiagramCollaborators"),e.transferDiagramOwnership=new e("TransferDiagramOwnership"),e.changeDiagramPrivacy=new e("ChangeDiagramPrivacy"),e.fetchUserSubscriptionData=new e("FetchUserSubscriptionData"),e.exportAsPng=new e("ExportAsPng"),e.fetchEmbedImageUrl=new e("FetchEmbedImageUrl"),e.resetEmbedImageToken=new e("ResetEmbedImageToken"),e.exportAsJpeg=new e("ExportAsJpeg"),e.exportAsSvg=new e("ExportAsSvg"),e.exportAsPdf=new e("ExportAsPdf"),e.selectShapes=new e("SelectShapes"),e.addComment=new e("AddComment"),e.editComment=new e("EditComment"),e.deleteComment=new e("DeleteComment"),e.resolveComment=new e("ResolveComment"),e.markCommentSeen=new e("MarkCommentSeen"),e.deleteDiagram=new U.a("DeleteDiagram"),e.documentChange=new e("DocumentChange"),e.changeMouseControlState=new e("ChangeMouseControlState"),e}(i.c)},qonV:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("D57K"),o=n("5xGT"),i=n("nsO7"),a=function(){function t(t,e){this.state=t,this.postMessage=e,this._fetch=window.fetch.bind(window),this._document=window.document,this.frames={}}return t.prototype.initialize=function(){this.state.initialize("EnabledPlugins",[]),this.manifests={},this.identifiers={},this.prepareContainerElement()},t.prototype.load=function(t){return r.c(this,void 0,void 0,(function(){var e,n;return r.f(this,(function(r){switch(r.label){case 0:if(!this.isAllowedPlugin(t))throw new Error("Plugin error: please add "+t+" to the whitelist");return this.frames[t]?[2]:[4,this.loadPluginManifest(t)];case 1:return e=r.sent(),this.manifests[t]=e,this.identifiers[t]||(n=this.getRandomIdentifier(),this.identifiers[t]=n),[4,this.loadPluginMainIframe(e)];case 2:return r.sent(),this.state.set("EnabledPlugins",this.state.get("EnabledPlugins").concat([e])),[2]}}))}))},t.prototype.unload=function(t){return r.c(this,void 0,void 0,(function(){var e,n;return r.f(this,(function(r){return o.K.debug("Unload plugin",t),(e=this.manifests[t])&&(delete this.frames[t],n=Object(i.remove)(this.state.get("EnabledPlugins"),(function(t){return t.url===e._url})),this.state.set("EnabledPlugins",n)),[2]}))}))},t.prototype.burrowMainIframe=function(t){return this.frames[t]},t.prototype.returnMainIframe=function(t,e){this.container.appendChild(e)},t.prototype.prepareContainerElement=function(){this._document.getElementById(t.CONTAINER_ELEMENT_ID)||(this.container=document.createElement("div"),this.container.id=t.CONTAINER_ELEMENT_ID,this._document.body.appendChild(this.container))},t.prototype.isAllowedPlugin=function(t){return!0},t.prototype.loadPluginManifest=function(t){return r.c(this,void 0,void 0,(function(){var e;return r.f(this,(function(n){switch(n.label){case 0:return[4,this.fetchPluginManifestFromCache(t)];case 1:return(e=n.sent())?[3,5]:[4,this.fetchPluginManifestFromSource(t)];case 2:return e=n.sent(),[4,this.checkPluginManifest(t,e)];case 3:return n.sent(),[4,this.cachePluginManifest(t,e)];case 4:n.sent(),n.label=5;case 5:return[2,e]}}))}))},t.prototype.fetchPluginManifestFromCache=function(t){return r.c(this,void 0,void 0,(function(){return r.f(this,(function(e){return[2,this.manifests[t]]}))}))},t.prototype.fetchPluginManifestFromSource=function(t){return r.c(this,void 0,void 0,(function(){var e;return r.f(this,(function(n){switch(n.label){case 0:return[4,this._fetch(t)];case 1:return[4,n.sent().json()];case 2:return(e=n.sent())._url=t,[2,e]}}))}))},t.prototype.checkPluginManifest=function(t,e){return r.c(this,void 0,void 0,(function(){return r.f(this,(function(t){return[2]}))}))},t.prototype.cachePluginManifest=function(t,e){return r.c(this,void 0,void 0,(function(){return r.f(this,(function(t){return[2]}))}))},t.prototype.loadPluginMainIframe=function(t){var e=this;return new Promise((function(n,r){var i=document.createElement("iframe");i.setAttribute("allow","camera; microphone"),i.onload=function(r){e.sendMessage(o.V.pluginInit,{id:e.identifiers[t._url]},t._url),n()},i.src=t.main,e.container.appendChild(i),e.frames[t._url]=i}))},t.prototype.recieveMessages=function(t){if(!this.manifests[t])throw new Error("Plugin error: invalid message subscription request for "+t);var e=this.getHostFromUrl(t);return this.postMessage.recv([e],this.identifiers[t])},t.prototype.getHostFromUrl=function(t){var e=t.match(/^https?\:\/\/[^\/?#]+/i);if(e&&e.length>-1)return e[0]},t.prototype.sendMessage=function(t,e,n){var r=this.frames[n];r&&this.postMessage.sendToWindow(t,e,r.contentWindow)},t.prototype.getRandomIdentifier=function(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)},t.CONTAINER_ELEMENT_ID="creately-plugin-container",t}()},r78O:function(t,e,n){"use strict";var r=n("LoAr"),o=n("IfiR"),i=n("WT9V"),a=n("jHi0"),s=n("Wrqg"),u=n("zZcu");n.d(e,"a",(function(){return c})),n.d(e,"b",(function(){return y}));var l=[[".text-input-inner[_ngcontent-%COMP%]{position:relative}.text-input-tooltip[_ngcontent-%COMP%]{position:absolute;z-index:0;width:100%}.text-invalid-input[_ngcontent-%COMP%]{color:#f36c67;border:1px solid #f36c67}.text-input-clear-btn[_ngcontent-%COMP%]{display:none;position:absolute;top:12px;right:10px}.text-input-multilined[_ngcontent-%COMP%]{line-height:20px}.text-input-item.show-clear[_ngcontent-%COMP%]   .text-input-clear-btn[_ngcontent-%COMP%]{display:inline-block}.text-input-item.show-clear[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{padding-right:30px}.text-input-item.has-icon[_ngcontent-%COMP%]   .text-input[_ngcontent-%COMP%]{padding-left:30px}.text-input-icon[_ngcontent-%COMP%]{position:absolute;left:0;top:6px}.text-input-icon[_ngcontent-%COMP%]:hover, .text-input-item[_ngcontent-%COMP%]   .text-input-icon[_ngcontent-%COMP%], .text-input[_ngcontent-%COMP%]:hover + .text-input-icon[_ngcontent-%COMP%]{color:#dcdcdc;cursor:auto}.text-input[_ngcontent-%COMP%]::-ms-clear{display:none}.text-input.transparent[_ngcontent-%COMP%]{background:0 0;pointer-events:none;margin:0;padding:8px 0;border:none}.text-input-multilined.transparent[_ngcontent-%COMP%]{border:none;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}"]],c=r.Fb({encapsulation:0,styles:l,data:{}});function p(t){return r.dc(0,[(t()(),r.Hb(0,0,[[1,0],["inputItem",1]],null,5,"input",[["class","text-input"]],[[8,"type",0],[2,"text-invalid-input",null],[2,"transparent",null],[8,"placeholder",0],[8,"readOnly",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"keydown"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],(function(t,e,n){var o=!0,i=t.component;"input"===e&&(o=!1!==r.Tb(t,1)._handleInput(n.target.value)&&o);"blur"===e&&(o=!1!==r.Tb(t,1).onTouched()&&o);"compositionstart"===e&&(o=!1!==r.Tb(t,1)._compositionStart()&&o);"compositionend"===e&&(o=!1!==r.Tb(t,1)._compositionEnd(n.target.value)&&o);"ngModelChange"===e&&(o=!1!==(i.value=n)&&o);"input"===e&&(o=!1!==i.onInputChange(i.inputText)&&o);"keydown"===e&&(o=!1!==i.onKeydown(n)&&o);"blur"===e&&(o=!1!==i.onBlur(i.inputText)&&o);return o}),null,null)),r.Gb(1,16384,null,0,o.c,[r.P,r.o,[2,o.a]],null,null),r.Yb(1024,null,o.e,(function(t){return[t]}),[o.c]),r.Gb(3,671744,null,0,o.h,[[8,null],[8,null],[8,null],[6,o.e]],{isDisabled:[0,"isDisabled"],model:[1,"model"]},{update:"ngModelChange"}),r.Yb(2048,null,o.f,null,[o.h]),r.Gb(5,16384,null,0,o.g,[[4,o.f]],null,null)],(function(t,e){var n=e.component;t(e,3,0,n.disabled,n.value)}),(function(t,e){var n=e.component;t(e,0,1,[n.type,n.invalidInput,n.transparentTextBox,n.placeholder,n.readonly,r.Tb(e,5).ngClassUntouched,r.Tb(e,5).ngClassTouched,r.Tb(e,5).ngClassPristine,r.Tb(e,5).ngClassDirty,r.Tb(e,5).ngClassValid,r.Tb(e,5).ngClassInvalid,r.Tb(e,5).ngClassPending])}))}function d(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.bc(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.tooltip.heading)}))}function f(t){return r.dc(0,[(t()(),r.Hb(0,0,[[1,0],["inputItem",1]],null,1,"div",[["class","text-input-multilined"],["contenteditable","true"]],[[2,"transparent",null],[1,"data-placeholder",0],[2,"fx-overflow-y",null]],[[null,"input"],[null,"keydown"],[null,"blur"]],(function(t,e,n){var r=!0,o=t.component;"input"===e&&(r=!1!==o.onInputChange(o.text)&&r);"keydown"===e&&(r=!1!==o.onKeydown(n)&&r);"blur"===e&&(r=!1!==o.onBlur(o.text,n)&&r);return r}),null,null)),(t()(),r.bc(1,null,["",""]))],null,(function(t,e){var n=e.component;t(e,0,0,n.transparentTextBox,n.placeholder,n.allowScroll),t(e,1,0,n.value)}))}function h(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"div",[["class","text-input-multilined readonly"]],null,null,null,null,null)),(t()(),r.bc(1,null,["",""]))],null,(function(t,e){t(e,1,0,e.component.value)}))}function g(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,4,"div",[],null,null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,f)),r.Gb(2,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.wb(16777216,null,null,1,null,h)),r.Gb(4,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,2,0,!n.readonly),t(e,4,0,n.readonly)}),null)}function b(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,":svg:svg",[["class","text-input-icon nu-icon xmedium-grey"]],null,null,null,null,null)),(t()(),r.Hb(1,0,null,null,0,":svg:use",[],[[1,":xlink:href",0]],null,null,null,null))],null,(function(t,e){t(e,1,0,e.component.iconURL)}))}function m(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,6,"span",[["class","text-input-clear-btn"],["placement","bottom"],["tooltip",""]],null,[[null,"click"]],(function(t,e,n){var r=!0,o=t.component;"click"===e&&(r=!1!==o.clear()&&r);return r}),null,null)),r.Gb(1,81920,null,0,a.a,[r.o],{placement:[0,"placement"]},null),(t()(),r.Hb(2,0,null,null,1,":svg:svg",[["class","nu-icon nu-icon-small grey"]],null,null,null,null,null)),(t()(),r.Hb(3,0,null,null,0,":svg:use",[[":xlink:href","./assets/icons/symbol-defs.svg#nu-ic-close"]],null,null,null,null,null)),(t()(),r.Hb(4,0,null,null,2,"div",[["class","tooltip-content"]],null,null,null,null,null)),(t()(),r.bc(5,null,[" "," "])),r.Vb(131072,i.b,[r.i])],(function(t,e){t(e,1,0,"bottom")}),(function(t,e){var n=e.component;t(e,5,0,r.cc(e,5,0,r.Tb(e,6).transform(n.translate.get("TOOLTIPS.CLEAR_TEXTBOX"))))}))}function y(t){return r.dc(2,[r.Zb(671088640,1,{inputElement:0}),(t()(),r.Hb(1,0,null,null,19,"div",[["class","text-input-item"]],[[2,"text-item-inline",null],[2,"show-clear",null],[2,"has-icon",null]],null,null,null,null)),r.Vb(131072,i.b,[r.i]),(t()(),r.Hb(3,0,null,null,1,"label",[["class","grey"]],null,null,null,null,null)),(t()(),r.bc(4,null,["",""])),(t()(),r.Hb(5,0,null,null,15,"div",[["class","text-input-inner"]],null,null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,p)),r.Gb(7,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.Hb(8,0,null,null,6,"div",[["class","text-input-tooltip"],["tooltip",""]],[[2,"fx-hidden",null]],null,null,null,null)),r.Gb(9,81920,null,0,a.a,[r.o],null,null),(t()(),r.Hb(10,0,null,null,4,"div",[["class","tooltip-content"]],null,null,null,null,null)),(t()(),r.wb(16777216,null,null,1,null,d)),r.Gb(12,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.Hb(13,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.bc(14,null,["",""])),(t()(),r.wb(16777216,null,null,1,null,g)),r.Gb(16,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.wb(16777216,null,null,1,null,b)),r.Gb(18,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null),(t()(),r.wb(16777216,null,null,1,null,m)),r.Gb(20,16384,null,0,i.k,[r.db,r.Y],{ngIf:[0,"ngIf"]},null)],(function(t,e){var n=e.component;t(e,7,0,!n.multiLined),t(e,9,0),t(e,12,0,n.tooltip.heading),t(e,16,0,n.multiLined),t(e,18,0,n.icon),t(e,20,0,n.showClearButton)}),(function(t,e){var n=e.component;t(e,1,0,n.inline,!r.cc(e,1,1,r.Tb(e,2).transform(n.isEmpty))&&n.showClearButton,n.icon),t(e,4,0,n.label),t(e,8,0,!n.tooltip.content),t(e,14,0,n.tooltip.content)}))}r.Db("text-input",s.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,1,"text-input",[],null,null,null,y,c)),r.Gb(1,4440064,null,0,s.a,[u.k],null,null)],(function(t,e){t(e,1,0)}),null)}),{value:"value",type:"type",tooltip:"tooltip",label:"label",icon:"icon",showClearButton:"showClearButton",invalidInput:"invalidInput",placeholder:"placeholder",readonly:"readonly",disabled:"disabled",inline:"inline",emitForInputChange:"emitForInputChange",debounce:"debounce",multiLined:"multiLined",submitOnBlur:"submitOnBlur",submitOnCode:"submitOnCode",clearOnSubmit:"clearOnSubmit",autoFocus:"autoFocus",allowScroll:"allowScroll",transparentTextBox:"transparentTextBox"},{updateText:"updateText",updateTextNoDelay:"updateTextNoDelay",keydown:"keydown",blur:"blur",submit:"submit"},[])},s9Xn:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e}(n("hSRu").a)},sKtG:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("D57K"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),e}(n("hSRu").a)},sXdR:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("nsO7"),o=n("LcNk");e.lodashThrottle=function(t,e){return void 0===e&&(e={leading:!0,trailing:!0}),function(n){return o.Observable.create((function(o){var i=r.throttle(o.next.bind(o),t,e),a=n.subscribe((function(t){return i(t)}),(function(t){return o.next(t)}),(function(){return o.complete()}));return function(){a.unsubscribe()}}))}}},uDTp:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n("D57K"),o=n("5xGT"),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.e(e,t),Object.defineProperty(e,"configKey",{get:function(){return"APP_MODE"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ifMode",{set:function(t){if(Array.isArray(t))this.values=t;else{if("string"!=typeof t)throw new Error("The [ifMode] directive requires a string or string array");this.values=[t]}},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){-1!==this.values.indexOf(o.h.get(e.configKey))?this.showElement():this.hideElement()},e}(o.i)},wk5G:function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return a}));var r,o=n("D57K"),i=n("h1tj");!function(t){t.interactionStart="interaction-start",t.interaction="interaction",t.interactionImmediate="interaction-immediate",t.interactionEnd="interaction-end",t.interactionCancel="interaction-cancel"}(r||(r={}));var a=function(t){function e(e,n,r,o,i){var a=t.call(this,e,!0,!0)||this;return a.type=e,a.handle=r,a.targetOver=o,a.relatedEvent=i,a.interactionName=n,a}return o.e(e,t),e}(i.Event)},"wx9+":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("D57K"),o=n("nsO7"),i=n("3riI"),a=(n("5xGT"),n("Jg5f")),s=n("AouM"),u=n("G2Mx"),l=n("gZOS"),c=(n("w1VY"),n("QoSw"),function(){function t(t,e,n){this.state=t,this.ll=e,this.coordinate=n}return t.prototype.getCoordinateChanges=function(){return Object(i.b)(this.state.changes("DiagramZoomLevel"),this.state.changes("DiagramPan")).pipe(Object(a.a)((function(t){var e=r.i(t,2),n=e[0];return{pan:e[1],zoom:n}})))},t.prototype.getShapeModel=function(t){var e=this;return this.ll.forCurrentObserver(!0).pipe(Object(s.a)((function(e){return e.getShapeModel(t)})),Object(s.a)((function(n){return e.convertShape(t)})))},t.prototype.getShapeModels=function(t){var e=this;return this.ll.forCurrentObserver(!0).pipe(Object(s.a)((function(t){return t.getDiagramModel()})),Object(s.a)((function(n){var r=n.shapes;return t&&(r=Object(o.pickBy)(n.shapes,(function(e,n){return t.includes(n)}))),e.convertShapes(r)})))},t.prototype.getShapeOnce=function(t){return this.convertShape(t).pipe(Object(u.a)(1))},t.prototype.getShapeChanges=function(t){var e=this;return this.ll.forCurrentObserver(!0).pipe(Object(s.a)((function(e){return e.getShapeChanges(t)})),Object(s.a)((function(t){return e.convertShape(t.model.id).pipe(Object(a.a)((function(e){return{id:t.id,model:e,modifier:t.modifier}})))})))},t.prototype.convertShape=function(t){var e=this;return this.getCoordinateChanges().pipe(Object(s.a)((function(){return e.ll.forCurrentObserver(!0)})),Object(s.a)((function(e){return e.getShapeOnce(t)})),Object(a.a)((function(t){if(t){var n=l.Sakota.create(t);return n=e.coordinate.shape(n)}return null})))},t.prototype.convertShapes=function(t){var e=this;return this.getCoordinateChanges().pipe(Object(a.a)((function(){return Object(o.mapValues)(t,(function(t){var n=l.Sakota.create(t);return n=e.coordinate.shape(n)}))})))},t}())},xztl:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return s}));var r=n("LoAr"),o=n("SUEH"),i=n("TdEb"),a=r.Fb({encapsulation:2,styles:[],data:{}});function s(t){return r.dc(2,[(t()(),r.Hb(0,0,null,null,1,"div",[["class","simple-dd-btn-container"]],null,null,null,null,null)),r.Sb(null,0)],null,null)}r.Db("simple-dropdown-button",i.a,(function(t){return r.dc(0,[(t()(),r.Hb(0,0,null,null,2,"simple-dropdown-button",[],null,null,null,s,a)),r.Yb(6144,null,o.a,null,[i.a]),r.Gb(2,49152,null,0,i.a,[r.o],null,null)],null,null)}),{items:"items"},{clicked:"clicked"},["*"])},y0dT:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("fQLH"),o=n("LiEJ"),i=n("pN2L"),a=n("g3Dv"),s=n("19Zn"),u=function(){function t(){this.invalidInput=new Array(4).fill(!1),this._change=new r.a,this.valueSource=new o.a([]),this.dataSource=new o.a([])}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this.invalidInput.fill(!1),this._data=t,this.dataSource.next(t.value),this.dataItem||(this.dataItem=s.h.instance.create({type:a.d.NUMBER,validationRules:t.validationRules}))},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this.valueSource.next(this._data.value)},t.prototype.applyAnimated=function(){return this.apply(),Object(i.a)({})},Object.defineProperty(t.prototype,"iconHref",{get:function(){return"./assets/icons/symbol-defs.svg#nu-ic-"+this._data.icon},enumerable:!0,configurable:!0}),t.prototype.handleSubmit=function(t,e){if(isNaN(t)||this.dataItem&&null!==this.dataItem.validate(t))this.invalidInput[e]=!0;else{var n=this._data.value;n[e]=+t,this._change.next({value:n})}},t}()},yhNa:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("fQLH"),o=n("LiEJ"),i=n("d9YI"),a=function(){function t(){this._change=new r.a,this.valueSource=new o.a("")}return Object.defineProperty(t.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"change",{get:function(){return this._change.asObservable()},enumerable:!0,configurable:!0}),t.prototype.setData=function(t){this._data=t},t.prototype.setProperties=function(t){this._props=t},t.prototype.apply=function(){this.valueSource.next(this._data.value)},t.prototype.applyAnimated=function(){return this.apply(),Object(i.b)()},t}()},z3tU:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("pN2L"),o=n("5xGT"),i=n("Jg5f"),a=n("U3QC"),s=function(){function t(t){this.loader=t}return Object.defineProperty(t.prototype,"definitionSummaryKey",{get:function(){return o.h.get("RESOURCE_LOCATION")+o.h.get("SHAPE_RESOURCE_BASE")+"def-sum.json"},enumerable:!0,configurable:!0}),t.prototype.getDefinitions=function(t){var e=this;return this.loadingObservable?this.loadingObservable.pipe(Object(i.a)((function(){return e.findMany(t)}))):Object(r.a)(this.findMany(t))},t.prototype.getDefinition=function(t){var e=this;return this.loadingObservable?this.loadingObservable.pipe(Object(i.a)((function(){return e.findOne(t)}))):Object(r.a)(this.findOne(t))},t.prototype.load=function(){var t=this;return this.loadingObservable=this.loader.forceLoad(this.definitionSummaryKey).pipe(Object(i.a)((function(e){return t.loadedDefinitionSummery=e.defs}))),this.loadingObservable.pipe(Object(a.a)({complete:function(){return t.loadingObservable=void 0}}))},t.prototype.findOne=function(t){var e=this;return this.loadedDefinitionSummery.find((function(n){return t===e.getFullyQualifiedDefId(n)}))},t.prototype.findMany=function(t){var e=this;return t.map((function(t){return e.loadedDefinitionSummery.find((function(n){return e.getFullyQualifiedDefId(n)===t}))})).filter((function(t){return!!t}))},t.prototype.getFullyQualifiedDefId=function(t){return t.defId+"."+t.version},t}()},zd2y:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("D57K"),o=(n("C5+t"),n("5xGT"),n("xnGY")),i=n("8Fqk"),a=n("d9YI"),s=n("cQOC"),u=n("G2Mx"),l=n("AouM"),c=function(t){function e(e,n,r,o,i){var a=t.call(this,e)||this;return a.logger=e,a.messageFactory=n,a.authentication=r,a.commandService=o,a.neutrinoConnection=i,a}return r.e(e,t),e.prototype.startSubscription=function(t){var e=this;return this.logger.debug("SubscriptionService: starting subscription: "+t.resourceId),Object(i.a)((function(){return t.getLatestSyncedTime().pipe(Object(u.a)(1))})).pipe(Object(l.a)((function(n){return e.sendSubStartRequest(t,n)})),Object(l.a)((function(n){return e.handleSubStartResponse(t,n)})))},e.prototype.closeSubscription=function(t){return this.logger.debug("SubscriptionService: closing subscription: "+t.resourceId),this.sendSubEndRequest(t)},e.prototype.sendSubStartRequest=function(t,e){var n=this.messageFactory.createSubscriptionMessage("start",t.subscription,t.resourceId);return n.authToken=this.authentication.token,n.payload=e?{latestCommentTimestamp:e}:{},this.neutrinoConnection.send(n)},e.prototype.sendSubEndRequest=function(t){var e=this.messageFactory.createSubscriptionMessage("end",t.subscription,t.resourceId);return e.authToken=this.authentication.token,e.payload={},this.neutrinoConnection.send(e)},e.prototype.handleSubStartResponse=function(t,e){var n=e.ppld,r=[];if(n.comments){var o={type:t.modelType,data:{model:n.comments}};r.push(this.commandService.collab("SubStoreModels",e.rid,null,o))}return r.length?Object(s.a)(r):Object(a.b)()},e}(o.c)}}]);
//# sourceMappingURL=1.a5f183fca0382946f1a3.js.map